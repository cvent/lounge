<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>API Reference | Lounge</title>
    <meta name="description" content="Simple Mongoose-inspired ODM for Couchbase">
    
    
    <link rel="preload" href="/lounge/assets/css/0.styles.feb877a9.css" as="style"><link rel="preload" href="/lounge/assets/js/app.4f62df11.js" as="script"><link rel="preload" href="/lounge/assets/js/2.1ee5204e.js" as="script"><link rel="preload" href="/lounge/assets/js/6.4f70d6da.js" as="script"><link rel="prefetch" href="/lounge/assets/js/10.2949d719.js"><link rel="prefetch" href="/lounge/assets/js/11.a1ea3960.js"><link rel="prefetch" href="/lounge/assets/js/12.bee45255.js"><link rel="prefetch" href="/lounge/assets/js/13.a93e3541.js"><link rel="prefetch" href="/lounge/assets/js/14.765dda7b.js"><link rel="prefetch" href="/lounge/assets/js/15.87f3dcbc.js"><link rel="prefetch" href="/lounge/assets/js/16.39a29adf.js"><link rel="prefetch" href="/lounge/assets/js/17.13ee8fcf.js"><link rel="prefetch" href="/lounge/assets/js/18.64cff16d.js"><link rel="prefetch" href="/lounge/assets/js/19.27de4646.js"><link rel="prefetch" href="/lounge/assets/js/20.5fd56dde.js"><link rel="prefetch" href="/lounge/assets/js/21.bd46a68a.js"><link rel="prefetch" href="/lounge/assets/js/22.f1e3b039.js"><link rel="prefetch" href="/lounge/assets/js/23.4c89548c.js"><link rel="prefetch" href="/lounge/assets/js/24.f4f63d9b.js"><link rel="prefetch" href="/lounge/assets/js/25.46f6bec9.js"><link rel="prefetch" href="/lounge/assets/js/26.74c79eab.js"><link rel="prefetch" href="/lounge/assets/js/27.17bc2875.js"><link rel="prefetch" href="/lounge/assets/js/3.d4eb21b0.js"><link rel="prefetch" href="/lounge/assets/js/4.2ca7c99c.js"><link rel="prefetch" href="/lounge/assets/js/5.cda0c2be.js"><link rel="prefetch" href="/lounge/assets/js/7.2b15dbed.js"><link rel="prefetch" href="/lounge/assets/js/8.461f3ad7.js"><link rel="prefetch" href="/lounge/assets/js/9.caba79c2.js">
    <link rel="stylesheet" href="/lounge/assets/css/0.styles.feb877a9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lounge/" class="home-link router-link-active"><!----> <span class="site-name">Lounge</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lounge/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/lounge/api/" class="nav-link router-link-exact-active router-link-active">API Reference</a></div><div class="nav-item"><a href="https://github.com/bojand/lounge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lounge/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/lounge/api/" class="nav-link router-link-exact-active router-link-active">API Reference</a></div><div class="nav-item"><a href="https://github.com/bojand/lounge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>API Reference</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/lounge/api/" class="active sidebar-link">Classes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lounge/api/#classes" class="sidebar-link">Classes</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#abstractbasemodel" class="sidebar-link">AbstractBaseModel</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#basemodel-⇐-eventemitter" class="sidebar-link">BaseModel ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#couchbasedocument-⇐-document" class="sidebar-link">CouchbaseDocument ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#document-⇐-basemodel" class="sidebar-link">Document ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#lounge-⇐-bucket" class="sidebar-link">Lounge ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#model-⇐-couchbasedocument" class="sidebar-link">Model ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#modelinstance-⇐-model" class="sidebar-link">ModelInstance ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#schema" class="sidebar-link">Schema</a></li></ul></li><li><a href="/lounge/api/" class="active sidebar-link">AbstractBaseModel</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lounge/api/#classes" class="sidebar-link">Classes</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#abstractbasemodel" class="sidebar-link">AbstractBaseModel</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#basemodel-⇐-eventemitter" class="sidebar-link">BaseModel ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#couchbasedocument-⇐-document" class="sidebar-link">CouchbaseDocument ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#document-⇐-basemodel" class="sidebar-link">Document ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#lounge-⇐-bucket" class="sidebar-link">Lounge ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#model-⇐-couchbasedocument" class="sidebar-link">Model ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#modelinstance-⇐-model" class="sidebar-link">ModelInstance ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#schema" class="sidebar-link">Schema</a></li></ul></li><li><a href="/lounge/api/" class="active sidebar-link">BaseModel</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lounge/api/#classes" class="sidebar-link">Classes</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#abstractbasemodel" class="sidebar-link">AbstractBaseModel</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#basemodel-⇐-eventemitter" class="sidebar-link">BaseModel ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#couchbasedocument-⇐-document" class="sidebar-link">CouchbaseDocument ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#document-⇐-basemodel" class="sidebar-link">Document ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#lounge-⇐-bucket" class="sidebar-link">Lounge ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#model-⇐-couchbasedocument" class="sidebar-link">Model ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#modelinstance-⇐-model" class="sidebar-link">ModelInstance ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#schema" class="sidebar-link">Schema</a></li></ul></li><li><a href="/lounge/api/" class="active sidebar-link">CouchbaseDocument</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lounge/api/#classes" class="sidebar-link">Classes</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#abstractbasemodel" class="sidebar-link">AbstractBaseModel</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#basemodel-⇐-eventemitter" class="sidebar-link">BaseModel ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#couchbasedocument-⇐-document" class="sidebar-link">CouchbaseDocument ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#document-⇐-basemodel" class="sidebar-link">Document ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#lounge-⇐-bucket" class="sidebar-link">Lounge ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#model-⇐-couchbasedocument" class="sidebar-link">Model ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#modelinstance-⇐-model" class="sidebar-link">ModelInstance ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#schema" class="sidebar-link">Schema</a></li></ul></li><li><a href="/lounge/api/" class="active sidebar-link">Document</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lounge/api/#classes" class="sidebar-link">Classes</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#abstractbasemodel" class="sidebar-link">AbstractBaseModel</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#basemodel-⇐-eventemitter" class="sidebar-link">BaseModel ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#couchbasedocument-⇐-document" class="sidebar-link">CouchbaseDocument ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#document-⇐-basemodel" class="sidebar-link">Document ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#lounge-⇐-bucket" class="sidebar-link">Lounge ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#model-⇐-couchbasedocument" class="sidebar-link">Model ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#modelinstance-⇐-model" class="sidebar-link">ModelInstance ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#schema" class="sidebar-link">Schema</a></li></ul></li><li><a href="/lounge/api/" class="active sidebar-link">Lounge</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lounge/api/#classes" class="sidebar-link">Classes</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#abstractbasemodel" class="sidebar-link">AbstractBaseModel</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#basemodel-⇐-eventemitter" class="sidebar-link">BaseModel ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#couchbasedocument-⇐-document" class="sidebar-link">CouchbaseDocument ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#document-⇐-basemodel" class="sidebar-link">Document ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#lounge-⇐-bucket" class="sidebar-link">Lounge ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#model-⇐-couchbasedocument" class="sidebar-link">Model ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#modelinstance-⇐-model" class="sidebar-link">ModelInstance ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#schema" class="sidebar-link">Schema</a></li></ul></li><li><a href="/lounge/api/" class="active sidebar-link">Model</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lounge/api/#classes" class="sidebar-link">Classes</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#abstractbasemodel" class="sidebar-link">AbstractBaseModel</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#basemodel-⇐-eventemitter" class="sidebar-link">BaseModel ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#couchbasedocument-⇐-document" class="sidebar-link">CouchbaseDocument ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#document-⇐-basemodel" class="sidebar-link">Document ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#lounge-⇐-bucket" class="sidebar-link">Lounge ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#model-⇐-couchbasedocument" class="sidebar-link">Model ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#modelinstance-⇐-model" class="sidebar-link">ModelInstance ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#schema" class="sidebar-link">Schema</a></li></ul></li><li><a href="/lounge/api/" class="active sidebar-link">ModelInstance</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lounge/api/#classes" class="sidebar-link">Classes</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#abstractbasemodel" class="sidebar-link">AbstractBaseModel</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#basemodel-⇐-eventemitter" class="sidebar-link">BaseModel ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#couchbasedocument-⇐-document" class="sidebar-link">CouchbaseDocument ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#document-⇐-basemodel" class="sidebar-link">Document ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#lounge-⇐-bucket" class="sidebar-link">Lounge ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#model-⇐-couchbasedocument" class="sidebar-link">Model ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#modelinstance-⇐-model" class="sidebar-link">ModelInstance ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#schema" class="sidebar-link">Schema</a></li></ul></li><li><a href="/lounge/api/" class="active sidebar-link">Schema</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lounge/api/#classes" class="sidebar-link">Classes</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#abstractbasemodel" class="sidebar-link">AbstractBaseModel</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#basemodel-⇐-eventemitter" class="sidebar-link">BaseModel ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#couchbasedocument-⇐-document" class="sidebar-link">CouchbaseDocument ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#document-⇐-basemodel" class="sidebar-link">Document ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#lounge-⇐-bucket" class="sidebar-link">Lounge ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#model-⇐-couchbasedocument" class="sidebar-link">Model ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#modelinstance-⇐-model" class="sidebar-link">ModelInstance ⇐</a></li><li class="sidebar-sub-header"><a href="/lounge/api/#schema" class="sidebar-link">Schema</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="api-reference"><a href="#api-reference" aria-hidden="true" class="header-anchor">#</a> API Reference</h1> <h2 id="classes"><a href="#classes" aria-hidden="true" class="header-anchor">#</a> Classes</h2> <dl><dt><a href="#AbstractBaseModel">AbstractBaseModel</a></dt> <dd><p>Abstract Base Model representation for all created Document instances.
Represents just the document data and generic properties and functions.
Also used for &quot;object&quot; abstraction / representation of sub documents that are not actual Models / Documents.
Clients should never have to call this directly.</p></dd> <dt><a href="#BaseModel">BaseModel</a> ⇐ <code>EventEmitter</code></dt> <dd><p>BaseModel implements <code>AbstractBaseModel</code> and is a representation for all created Document
instances that have a user defined schema. Represents just the document data and generic properties and functions.
Clients should never have to call this directly. Inherits <code>EventEmitter</code></p></dd> <dt><a href="#CouchbaseDocument">CouchbaseDocument</a> ⇐ <code><a href="#Document">Document</a></code></dt> <dd><p>CouchbaseDocument inherits Document and handles all the database related actions.
Clients should never have to call this directly.</p></dd> <dt><a href="#Document">Document</a> ⇐ <code><a href="#BaseModel">BaseModel</a></code></dt> <dd><p>Base constructor for all created Document instances.
Represents just the document data and generic properties and functions.
Clients should never have to call this directly.</p></dd> <dt><a href="#Lounge">Lounge</a> ⇐ <code>Bucket</code></dt> <dd><p>The Lounge module
The exports object of the <code>lounge</code> module is an instance of this class.
Most apps will only use this one instance. We copy all Couchbase <code>Bucket</code> methods and properties
so you can call them generically = require(this instance as well.</p></dd> <dt><a href="#Model">Model</a> ⇐ <code><a href="#CouchbaseDocument">CouchbaseDocument</a></code></dt> <dd><p>Model class is a base class for all <code>ModelInstances</code> and it extends <code>CouchbaseDocument</code></p></dd> <dt><a href="#ModelInstance">ModelInstance</a> ⇐ <code><a href="#Model">Model</a></code></dt> <dd><p>ModelInstance class is the compiled class from a schema definition. It extends <code>Model</code>.
All models generated are an instance of <code>ModelInstance</code>. It also inherits <code>grappling-hook</code>
See <a href="https://www.github.com/bojand/grappling-hook">grappling-hook</a> for pre and post hooks.</p></dd> <dt><a href="#Schema">Schema</a></dt> <dd><p>Schema class represents the schema definition. It includes properties, methods, static methods, and any
middleware we want to define.</p></dd></dl> <p><a name="AbstractBaseModel"></a></p> <h2 id="abstractbasemodel"><a href="#abstractbasemodel" aria-hidden="true" class="header-anchor">#</a> AbstractBaseModel</h2> <p>Abstract Base Model representation for all created Document instances.
Represents just the document data and generic properties and functions.
Also used for &quot;object&quot; abstraction / representation of sub documents that are not actual Models / Documents.
Clients should never have to call this directly.</p> <p><strong>Kind</strong>: global class</p> <ul><li><a href="#AbstractBaseModel">AbstractBaseModel</a> <ul><li><a href="#new_AbstractBaseModel_new">new AbstractBaseModel(values, options, schema)</a></li> <li><a href="#AbstractBaseModel+schema">.schema</a> ⇒ <a href="#Schema"><code>Schema</code></a></li> <li><a href="#AbstractBaseModel+set">.set()</a></li> <li><a href="#AbstractBaseModel+get">.get(path)</a> ⇒ <code>*</code></li> <li><a href="#AbstractBaseModel+toObject">.toObject(options)</a> ⇒ <code>Object</code></li> <li><a href="#AbstractBaseModel+toJSON">.toJSON(options)</a> ⇒ <code>Object</code></li> <li><a href="#AbstractBaseModel+inspect">.inspect()</a></li> <li><a href="#AbstractBaseModel+toString">.toString()</a></li> <li><a href="#AbstractBaseModel+clear">.clear()</a></li> <li><a href="#AbstractBaseModel+getErrors">.getErrors()</a></li> <li><a href="#AbstractBaseModel+clearErrors">.clearErrors()</a></li> <li><a href="#AbstractBaseModel+hasErrors">.hasErrors()</a> ⇒ <code>Boolean</code></li></ul></li></ul> <p><a name="new_AbstractBaseModel_new"></a></p> <h3 id="new-abstractbasemodel-values-options-schema"><a href="#new-abstractbasemodel-values-options-schema" aria-hidden="true" class="header-anchor">#</a> new AbstractBaseModel(values, options, schema)</h3> <p>Clients do not need to create <code>AbstractBaseModel</code> instances manually.</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>values</td> <td><code>Object</code></td> <td>the object data</td></tr> <tr><td>options</td> <td><code>Object</code></td> <td>creation options</td></tr> <tr><td>options.clone</td> <td><code>Boolean</code></td> <td>Whether to deep clone the incoming data. Default: <code>false</code>.                                  Make sure you wish to do this as it has performance implications. This is                                  useful if you are creating multiple instances from same base data and then                                  wish to modify each instance.</td></tr> <tr><td>schema</td> <td><a href="#Schema"><code>Schema</code></a></td> <td>schema instance</td></tr></tbody></table> <p><a name="AbstractBaseModel+schema"></a></p> <h3 id="abstractbasemodel-schema-⇒-schema"><a href="#abstractbasemodel-schema-⇒-schema" aria-hidden="true" class="header-anchor">#</a> abstractBaseModel.schema ⇒ <a href="#Schema"><code>Schema</code></a></h3> <p>Get the model schema instance</p> <p><strong>Kind</strong>: instance property of <a href="#AbstractBaseModel"><code>AbstractBaseModel</code></a><br> <strong>Access</strong>: public<br> <a name="AbstractBaseModel+set"></a></p> <h3 id="abstractbasemodel-set"><a href="#abstractbasemodel-set" aria-hidden="true" class="header-anchor">#</a> abstractBaseModel.set()</h3> <p>Sets data on the document based on the schema.
Accepts a key of property and value for the property, or object representing the data for document.</p> <p><strong>Kind</strong>: instance method of <a href="#AbstractBaseModel"><code>AbstractBaseModel</code></a><br> <strong>Access</strong>: public<br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>user<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'fistName'</span><span class="token punctuation">,</span> <span class="token string">'Joe'</span><span class="token punctuation">)</span>
user<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span> lastName<span class="token punctuation">:</span> <span class="token string">'Smith'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="AbstractBaseModel+get"></a></p> <h3 id="abstractbasemodel-get-path-⇒"><a href="#abstractbasemodel-get-path-⇒" aria-hidden="true" class="header-anchor">#</a> abstractBaseModel.get(path) ⇒ <code>*</code></h3> <p>Gets value at a specified path.</p> <p><strong>Kind</strong>: instance method of <a href="#AbstractBaseModel"><code>AbstractBaseModel</code></a><br> <strong>Returns</strong>: <code>*</code> - The value at the path.</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>path</td> <td><code>String</code></td> <td>The path / property to retrieve.</td></tr></tbody></table> <p><a name="AbstractBaseModel+toObject"></a></p> <h3 id="abstractbasemodel-toobject-options-⇒-object"><a href="#abstractbasemodel-toobject-options-⇒-object" aria-hidden="true" class="header-anchor">#</a> abstractBaseModel.toObject(options) ⇒ <code>Object</code></h3> <p>Converts this document into a plain javascript object.</p> <p><strong>Kind</strong>: instance method of <a href="#AbstractBaseModel"><code>AbstractBaseModel</code></a><br> <strong>Returns</strong>: <code>Object</code> - Plain javascript object representation of document.<br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td></td></tr> <tr><td>options.transform</td> <td><code>function</code></td> <td>a transform function to apply to the resulting document before returning.</td></tr> <tr><td>options.virtuals</td> <td><code>Boolean</code></td> <td>apply virtual getters. Default: <code>false</code></td></tr> <tr><td>options.minimize</td> <td><code>Boolean</code></td> <td>remove empty objects. Default: <code>true</code></td></tr> <tr><td>options.serializable</td> <td><code>Boolean</code></td> <td>whether to include <code>serializable</code> properties. Default: <code>true</code></td></tr> <tr><td>options.dateToISO</td> <td><code>Boolean</code></td> <td>convert dates to string in ISO format using <code>Date.toISOString()</code>. Default: <code>true</code></td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> userSchema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> userSchema<span class="token punctuation">)</span>
<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Joe Smith'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token comment">// automatically invokes toObject()</span>
</code></pre></div><p><strong>Example</strong> <em>(Example with transform option.)</em></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">xform</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">doc<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ret<span class="token punctuation">.</span>name <span class="token operator">=</span> ret<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> ret
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">toObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>transform<span class="token punctuation">:</span> xform<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// { name: 'JOE SMITH' }</span>
</code></pre></div><p><a name="AbstractBaseModel+toJSON"></a></p> <h3 id="abstractbasemodel-tojson-options-⇒-object"><a href="#abstractbasemodel-tojson-options-⇒-object" aria-hidden="true" class="header-anchor">#</a> abstractBaseModel.toJSON(options) ⇒ <code>Object</code></h3> <p>Similar as <code>toObject</code> but applied when <code>JSON.stringify</code> is called</p> <p><strong>Kind</strong>: instance method of <a href="#AbstractBaseModel"><code>AbstractBaseModel</code></a><br> <strong>Returns</strong>: <code>Object</code> - Plain javascript object representation of document.<br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td>Same options as <code>toObject</code>.</td></tr></tbody></table> <p><a name="AbstractBaseModel+inspect"></a></p> <h3 id="abstractbasemodel-inspect"><a href="#abstractbasemodel-inspect" aria-hidden="true" class="header-anchor">#</a> abstractBaseModel.inspect()</h3> <p>Helper for <code>console.log</code>. Just invokes default <code>toObject</code>.</p> <p><strong>Kind</strong>: instance method of <a href="#AbstractBaseModel"><code>AbstractBaseModel</code></a><br> <strong>Access</strong>: public<br> <a name="AbstractBaseModel+toString"></a></p> <h3 id="abstractbasemodel-tostring"><a href="#abstractbasemodel-tostring" aria-hidden="true" class="header-anchor">#</a> abstractBaseModel.toString()</h3> <p>Helper for <code>console.log</code>. Alias for <code>inspect</code>.</p> <p><strong>Kind</strong>: instance method of <a href="#AbstractBaseModel"><code>AbstractBaseModel</code></a><br> <strong>Access</strong>: public<br> <a name="AbstractBaseModel+clear"></a></p> <h3 id="abstractbasemodel-clear"><a href="#abstractbasemodel-clear" aria-hidden="true" class="header-anchor">#</a> abstractBaseModel.clear()</h3> <p>Clear the document data. This can be overridden at schema level using <code>Schema.set()</code>.</p> <p><strong>Kind</strong>: instance method of <a href="#AbstractBaseModel"><code>AbstractBaseModel</code></a><br> <a name="AbstractBaseModel+getErrors"></a></p> <h3 id="abstractbasemodel-geterrors"><a href="#abstractbasemodel-geterrors" aria-hidden="true" class="header-anchor">#</a> abstractBaseModel.getErrors()</h3> <p>Gets the errors object.</p> <p><strong>Kind</strong>: instance method of <a href="#AbstractBaseModel"><code>AbstractBaseModel</code></a><br> <a name="AbstractBaseModel+clearErrors"></a></p> <h3 id="abstractbasemodel-clearerrors"><a href="#abstractbasemodel-clearerrors" aria-hidden="true" class="header-anchor">#</a> abstractBaseModel.clearErrors()</h3> <p>Clears all the errors.</p> <p><strong>Kind</strong>: instance method of <a href="#AbstractBaseModel"><code>AbstractBaseModel</code></a><br> <a name="AbstractBaseModel+hasErrors"></a></p> <h3 id="abstractbasemodel-haserrors-⇒-boolean"><a href="#abstractbasemodel-haserrors-⇒-boolean" aria-hidden="true" class="header-anchor">#</a> abstractBaseModel.hasErrors() ⇒ <code>Boolean</code></h3> <p>Checks whether we have any errors.</p> <p><strong>Kind</strong>: instance method of <a href="#AbstractBaseModel"><code>AbstractBaseModel</code></a><br> <strong>Returns</strong>: <code>Boolean</code> - <code>true</code> if we have errors, <code>false</code> otherwise.<br> <a name="BaseModel"></a></p> <h2 id="basemodel-⇐-eventemitter"><a href="#basemodel-⇐-eventemitter" aria-hidden="true" class="header-anchor">#</a> BaseModel ⇐ <code>EventEmitter</code></h2> <p>BaseModel implements <code>AbstractBaseModel</code> and is a representation for all created Document
instances that have a user defined schema. Represents just the document data and generic properties and functions.
Clients should never have to call this directly. Inherits <code>EventEmitter</code></p> <p><strong>Kind</strong>: global class<br> <strong>Extends</strong>: <code>EventEmitter</code><br> <a name="new_BaseModel_new"></a></p> <h3 id="new-basemodel"><a href="#new-basemodel" aria-hidden="true" class="header-anchor">#</a> new BaseModel()</h3> <p>Clients do not need to create <code>BaseModel</code> instances manually.</p> <p><a name="CouchbaseDocument"></a></p> <h2 id="couchbasedocument-⇐-document"><a href="#couchbasedocument-⇐-document" aria-hidden="true" class="header-anchor">#</a> CouchbaseDocument ⇐ <a href="#Document"><code>Document</code></a></h2> <p>CouchbaseDocument inherits Document and handles all the database related actions.
Clients should never have to call this directly.</p> <p><strong>Kind</strong>: global class<br> <strong>Extends</strong>: <a href="#Document"><code>Document</code></a></p> <ul><li><a href="#CouchbaseDocument">CouchbaseDocument</a> ⇐ <a href="#Document"><code>Document</code></a> <ul><li><a href="#new_CouchbaseDocument_new">new CouchbaseDocument(values, cas, options, schema, name)</a></li> <li><em>instance</em> <ul><li><a href="#CouchbaseDocument+cas">.cas</a> ⇒ <code>String</code></li> <li><a href="#CouchbaseDocument+db">.db</a> ⇒ <code>Driver</code> | <code>null</code></li> <li><a href="#CouchbaseDocument+config">.config</a> ⇒ <code>Object</code></li> <li><a href="#Document+modelName">.modelName</a> : <code>String</code></li> <li><a href="#Document+_isNew">._isNew</a> : <code>Boolean</code></li> <li><a href="#CouchbaseDocument+getCAS">.getCAS(raw)</a> ⇒ <code>String</code> | <code>Object</code></li> <li><a href="#CouchbaseDocument+save">.save(options, replicate_to, fn)</a></li> <li><a href="#CouchbaseDocument+index">.index(options, fn)</a></li> <li><a href="#CouchbaseDocument+remove">.remove(options, fn)</a></li> <li><a href="#CouchbaseDocument+removeIndexes">.removeIndexes(options, fn)</a></li> <li><a href="#CouchbaseDocument+populate">.populate(options, fn)</a></li> <li><a href="#Document+getDocumentKeyValue">.getDocumentKeyValue(full)</a> ⇒ <code>String</code></li> <li><a href="#Document+getDocumentKeyKey">.getDocumentKeyKey()</a> ⇒ <code>String</code></li></ul></li> <li><em>static</em> <ul><li><a href="#CouchbaseDocument.findById">.findById(id, options, fn)</a></li> <li><a href="#CouchbaseDocument.remove">.remove(id, options, fn)</a></li></ul></li></ul></li></ul> <p><a name="new_CouchbaseDocument_new"></a></p> <h3 id="new-couchbasedocument-values-cas-options-schema-name"><a href="#new-couchbasedocument-values-cas-options-schema-name" aria-hidden="true" class="header-anchor">#</a> new CouchbaseDocument(values, cas, options, schema, name)</h3> <p>Clients do not need to create Document manually.</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>values</td> <td><code>Object</code></td> <td>the object data</td></tr> <tr><td>cas</td> <td><code>Object</code></td> <td>the Couchbase <code>CAS</code> value for the document</td></tr> <tr><td>options</td> <td><code>Object</code></td> <td>creation options</td></tr> <tr><td>options.clone</td> <td><code>Boolean</code></td> <td>Whether to deep clone the incoming data. Default: <code>false</code>.                                  Make sure you wish to do this as it has performance implications. This is                                  useful if you are creating multiple instances from same base data and then                                  wish to modify each instance.</td></tr> <tr><td>schema</td> <td><a href="#Schema"><code>Schema</code></a></td> <td>schema instance</td></tr> <tr><td>name</td> <td><code>String</code></td> <td>the model name</td></tr></tbody></table> <p><a name="CouchbaseDocument+cas"></a></p> <h3 id="couchbasedocument-cas-⇒-string"><a href="#couchbasedocument-cas-⇒-string" aria-hidden="true" class="header-anchor">#</a> couchbaseDocument.cas ⇒ <code>String</code></h3> <p>Returns the string representation of <code>CAS</code> value.</p> <p><strong>Kind</strong>: instance property of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a><br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>cas<span class="token punctuation">)</span> <span class="token comment">// String: 00000000a71626e4</span>
</code></pre></div><p><a name="CouchbaseDocument+db"></a></p> <h3 id="couchbasedocument-db-⇒-driver-null"><a href="#couchbasedocument-db-⇒-driver-null" aria-hidden="true" class="header-anchor">#</a> couchbaseDocument.db ⇒ <code>Driver</code> | <code>null</code></h3> <p>Gets the database driver of the model</p> <p><strong>Kind</strong>: instance property of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a><br> <a name="CouchbaseDocument+config"></a></p> <h3 id="couchbasedocument-config-⇒-object"><a href="#couchbasedocument-config-⇒-object" aria-hidden="true" class="header-anchor">#</a> couchbaseDocument.config ⇒ <code>Object</code></h3> <p>Gets the config object</p> <p><strong>Kind</strong>: instance property of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a><br> <a name="Document+modelName"></a></p> <h3 id="couchbasedocument-modelname-string"><a href="#couchbasedocument-modelname-string" aria-hidden="true" class="header-anchor">#</a> couchbaseDocument.modelName : <code>String</code></h3> <p>The name the name of the model. This is both a static and instance property.</p> <p><strong>Kind</strong>: instance property of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a><br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Cat <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> kitty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Zildjian'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Cat<span class="token punctuation">.</span>modelName<span class="token punctuation">)</span> <span class="token comment">// 'Cat'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>kitty<span class="token punctuation">.</span>modelName<span class="token punctuation">)</span> <span class="token comment">// 'Cat'</span>
</code></pre></div><p><a name="Document+_isNew"></a></p> <h3 id="couchbasedocument-isnew-boolean"><a href="#couchbasedocument-isnew-boolean" aria-hidden="true" class="header-anchor">#</a> couchbaseDocument._isNew : <code>Boolean</code></h3> <p>Has a key been generated for this document.</p> <p><strong>Kind</strong>: instance property of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a><br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Cat <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> kitty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Zildjian'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>kitty<span class="token punctuation">.</span>_isNew<span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token keyword">var</span> kat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'123abc'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Sabian'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>kat<span class="token punctuation">.</span>_isNew<span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><p><a name="CouchbaseDocument+getCAS"></a></p> <h3 id="couchbasedocument-getcas-raw-⇒-string-object"><a href="#couchbasedocument-getcas-raw-⇒-string-object" aria-hidden="true" class="header-anchor">#</a> couchbaseDocument.getCAS(raw) ⇒ <code>String</code> | <code>Object</code></h3> <p>Returns the document <code>CAS</code> value.</p> <p><strong>Kind</strong>: instance method of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a><br> <strong>Returns</strong>: <code>String</code> | <code>Object</code> - the CAS value</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>raw</td> <td><code>Boolean</code></td> <td>If <code>true</code> returns the raw CAS document. If <code>false</code> returns string                        representation of CAS. Defaults to <code>false</code>.</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">getCAS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// String: 00000000a71626e4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">getCAS</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Object: CouchbaseCas&lt;11338961768815788032&gt;</span>
</code></pre></div><p><a name="CouchbaseDocument+save"></a></p> <h3 id="couchbasedocument-save-options-replicate-to-fn"><a href="#couchbasedocument-save-options-replicate-to-fn" aria-hidden="true" class="header-anchor">#</a> couchbaseDocument.save(options, replicate_to, fn)</h3> <p>Save the current model instance. Calls db set function for the model id and saves the properties.</p> <p><strong>Kind</strong>: instance method of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td>The save options. All options not present here are first looked up from schema options, and then from config options.</td></tr> <tr><td>options.storeFullReferenceId</td> <td><code>Boolean</code></td> <td>whether to save embedded document property values as full document keys or just the base value</td></tr> <tr><td>options.storeFullKey</td> <td><code>Boolean</code></td> <td>whether to save the internal document key property as fully expanded value or as the simple value</td></tr> <tr><td>options.refIndexKeyPrefix</td> <td><code>String</code></td> <td>lookup index document key prefix.</td></tr> <tr><td>options.waitForIndex</td> <td><code>Boolean</code></td> <td>whether we want to wait for indexing to finish before returning. Default: <code>false</code>.</td></tr> <tr><td>options.virtuals</td> <td><code>Boolean</code></td> <td>whether we want to save virtuals. Default: <code>false</code>.</td></tr> <tr><td>options.minimize</td> <td><code>Boolean</code></td> <td>to &quot;minimize&quot; the document by removing any empty properties. Default: <code>true</code></td></tr> <tr><td>options.expiry</td> <td><code>Number</code></td> <td>couchbase upsert option</td></tr> <tr><td>options.persist_to</td> <td><code>Number</code></td> <td>couchbase persist_to option</td></tr> <tr><td>replicate_to</td> <td><code>Number</code></td> <td>couchbase option</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Bob Smith'</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">'bsmith@acme.com'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
user<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> savedDoc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="CouchbaseDocument+index"></a></p> <h3 id="couchbasedocument-index-options-fn"><a href="#couchbasedocument-index-options-fn" aria-hidden="true" class="header-anchor">#</a> couchbaseDocument.index(options, fn)</h3> <p>Update all lookup documents for this document instance. Creates new lookup documents for properties that have changed
and deletes the old ones not needed any more.</p> <p><strong>Kind</strong>: instance method of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td></td></tr> <tr><td>options.storeFullReferenceId</td> <td><code>Boolean</code></td> <td>whether we store full document id in reference documents</td></tr> <tr><td>options.atomicLock</td> <td><code>Boolean</code></td> <td>whether to use atomicLock</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><a name="CouchbaseDocument+remove"></a></p> <h3 id="couchbasedocument-remove-options-fn"><a href="#couchbasedocument-remove-options-fn" aria-hidden="true" class="header-anchor">#</a> couchbaseDocument.remove(options, fn)</h3> <p>Removes the instance from the database.
Calls the bucket <code>remove()</code> function. Options can be passed to the driver.</p> <p><strong>Kind</strong>: instance method of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td>Options to be passed to the Couchbase <code>Bucket.remove()</code> function.</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>user<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> doc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="CouchbaseDocument+removeIndexes"></a></p> <h3 id="couchbasedocument-removeindexes-options-fn"><a href="#couchbasedocument-removeindexes-options-fn" aria-hidden="true" class="header-anchor">#</a> couchbaseDocument.removeIndexes(options, fn)</h3> <p>Removes all lookup / index documents for this document.</p> <p><strong>Kind</strong>: instance method of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td></td></tr> <tr><td>options.storeFullReferenceId</td> <td><code>Boolean</code></td> <td>whether we store full document id in reference documents</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><a name="CouchbaseDocument+populate"></a></p> <h3 id="couchbasedocument-populate-options-fn"><a href="#couchbasedocument-populate-options-fn" aria-hidden="true" class="header-anchor">#</a> couchbaseDocument.populate(options, fn)</h3> <p>Populates this instance given the options</p> <p><strong>Kind</strong>: instance method of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Boolean</code> | <code>String</code> | <code>Array</code></td> <td>populate options, can be a <code>Boolean</code>;                               <code>String</code> representing a path;                               <code>Object</code> with form <code>{ path: String, target: String}</code> where                               <code>path</code> is the path to be populated and <code>target</code> is the target                               field into which to populate. If this format is used, <code>target</code> should be                               part of schema;                               or an <code>Array</code> of                               <code>Strings</code> or <code>Object</code>.</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>Callback</td></tr></tbody></table> <p><strong>Example</strong> <em>(Populate an instance)</em></p> <div class="language-js extra-class"><pre class="language-js"><code>User<span class="token punctuation">.</span><span class="token function">findBy</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>company<span class="token punctuation">)</span> <span class="token comment">// ID</span>
  user<span class="token punctuation">.</span><span class="token function">populate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> populatedUser</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>company<span class="token punctuation">)</span> <span class="token comment">// full populated sub documnet</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Example</strong> <em>(Populate a specific path within an instance)</em></p> <div class="language-js extra-class"><pre class="language-js"><code>User<span class="token punctuation">.</span><span class="token function">findBy</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>company<span class="token punctuation">)</span> <span class="token comment">// ID</span>
  user<span class="token punctuation">.</span><span class="token function">populate</span><span class="token punctuation">(</span><span class="token string">'company'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> populatedUser</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>company<span class="token punctuation">)</span> <span class="token comment">// full populated sub documnet</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="Document+getDocumentKeyValue"></a></p> <h3 id="couchbasedocument-getdocumentkeyvalue-full-⇒-string"><a href="#couchbasedocument-getdocumentkeyvalue-full-⇒-string" aria-hidden="true" class="header-anchor">#</a> couchbaseDocument.getDocumentKeyValue(full) ⇒ <code>String</code></h3> <p>Helper function to get the document key.</p> <p><strong>Kind</strong>: instance method of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a><br> <strong>Returns</strong>: <code>String</code> - document key<br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>full</td> <td><code>Boolean</code></td> <td>If <code>true</code> the full expanded value of the key will be returned.                  If there were any suffix and / or prefix defined in schema they are applied.</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> keyPrefix<span class="token punctuation">:</span> <span class="token string">'user::'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> <span class="token string">'bsmith@acme.com'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 114477a8-1901-4146-8c90-0fc9eec57a58</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// user::114477a8-1901-4146-8c90-0fc9eec57a58</span>
</code></pre></div><p><a name="Document+getDocumentKeyKey"></a></p> <h3 id="couchbasedocument-getdocumentkeykey-⇒-string"><a href="#couchbasedocument-getdocumentkeykey-⇒-string" aria-hidden="true" class="header-anchor">#</a> couchbaseDocument.getDocumentKeyKey() ⇒ <code>String</code></h3> <p>Gets the Document key property name.</p> <p><strong>Kind</strong>: instance method of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a><br> <strong>Returns</strong>: <code>String</code> - Document key property name<br> <strong>Access</strong>: public<br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span> String<span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> generate<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> <span class="token string">'bsmith@acme.com'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDocumentKeyKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// email</span>
</code></pre></div><p><a name="CouchbaseDocument.findById"></a></p> <h3 id="couchbasedocument-findbyid-id-options-fn"><a href="#couchbasedocument-findbyid-id-options-fn" aria-hidden="true" class="header-anchor">#</a> CouchbaseDocument.findById(id, options, fn)</h3> <p>All models created come with a static function <code>findById</code> that can be used to look up a single
or multiple keys and retrieve documents from the database. If key does not exist and document is not found we
<strong>do not</strong> return an error but also no model is generated. This is different than present couchbase module behaviour.</p> <p><strong>Kind</strong>: static method of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>id</td> <td><code>String</code> | <code>Array</code></td> <td>the document id / key or an array of keys</td></tr> <tr><td>options</td> <td><code>Object</code></td> <td></td></tr> <tr><td>options.populate</td> <td><code>Boolean</code> | <code>String</code> | <code>Array</code></td> <td>populate options, can be a <code>Boolean</code>;                               <code>String</code> representing a path;                               <code>Object</code> with form <code>{ path: String, target: String }</code> where                               <code>path</code> is the path to be populated and <code>target</code> is the target                               field into which to populate. If this format is used, <code>target</code> should be                               part of schema;                               or an <code>Array</code> of                               <code>Strings</code> or <code>Object</code>.</td></tr> <tr><td>options.keepSortOrder</td> <td><code>Boolean</code></td> <td>If getting an array of objects, whether we should keep same sort order of                                        returned objects as the <code>id</code>'s passed in.                                        Default: <code>false</code></td></tr> <tr><td>options.missing</td> <td><code>Boolean</code></td> <td>If set to <code>false</code> we won't return missing keys as the final param in                                  the callback. This option overwrites the Lounge config <code>missing</code> option.                                  Default: <code>true</code>.</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>User<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token string">'user123'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> missing</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token comment">// there was an error looking up the key</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>doc<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'no document found'</span><span class="token punctuation">)</span>
  <span class="token keyword">else</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span> <span class="token comment">// doc is instance of User and will print it out</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="CouchbaseDocument.remove"></a></p> <h3 id="couchbasedocument-remove-id-options-fn"><a href="#couchbasedocument-remove-id-options-fn" aria-hidden="true" class="header-anchor">#</a> CouchbaseDocument.remove(id, options, fn)</h3> <p>Removes specified document(s).</p> <p><strong>Kind</strong>: static method of <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>id</td> <td><code>String</code> | <code>Array</code></td> <td>id(s) to remove</td></tr> <tr><td>options</td> <td><code>Object</code></td> <td>options</td></tr> <tr><td>options.lean</td> <td><code>Boolean</code></td> <td>if <code>true</code> we will directly do document removal. We do not create an instance of model.                                 No middleware is invoked. No indexes updated. Embedded documents are not deleted. Default: <code>false</code>.</td></tr> <tr><td>options.removeRefs</td> <td><code>Boolean</code></td> <td>If set to <code>true</code> will remove embedded reference documents. Default: <code>false</code>.</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>User<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'user123'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> doc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="Document"></a></p> <h2 id="document-⇐-basemodel"><a href="#document-⇐-basemodel" aria-hidden="true" class="header-anchor">#</a> Document ⇐ <a href="#BaseModel"><code>BaseModel</code></a></h2> <p>Base constructor for all created Document instances.
Represents just the document data and generic properties and functions.
Clients should never have to call this directly.</p> <p><strong>Kind</strong>: global class<br> <strong>Extends</strong>: <a href="#BaseModel"><code>BaseModel</code></a></p> <ul><li><a href="#Document">Document</a> ⇐ <a href="#BaseModel"><code>BaseModel</code></a> <ul><li><a href="#new_Document_new">new Document(values, options, schema, name)</a></li> <li><em>instance</em> <ul><li><a href="#Document+modelName">.modelName</a> : <code>String</code></li> <li><a href="#Document+_isNew">._isNew</a> : <code>Boolean</code></li> <li><a href="#Document+getDocumentKeyValue">.getDocumentKeyValue(full)</a> ⇒ <code>String</code></li> <li><a href="#Document+getDocumentKeyKey">.getDocumentKeyKey()</a> ⇒ <code>String</code></li></ul></li> <li><em>static</em> <ul><li><a href="#Document.getDocumentKeyKey">.getDocumentKeyKey()</a> ⇒ <code>String</code></li> <li><a href="#Document.getDocumentKeyValue">.getDocumentKeyValue(id, full)</a> ⇒ <code>string</code></li></ul></li></ul></li></ul> <p><a name="new_Document_new"></a></p> <h3 id="new-document-values-options-schema-name"><a href="#new-document-values-options-schema-name" aria-hidden="true" class="header-anchor">#</a> new Document(values, options, schema, name)</h3> <p>Clients do not need to create Document manually.</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>values</td> <td><code>Object</code></td> <td>the object data</td></tr> <tr><td>options</td> <td><code>Object</code></td> <td>creation options</td></tr> <tr><td>options.clone</td> <td><code>Boolean</code></td> <td>Whether to deep clone the incoming data. Default: <code>false</code>.                                  Make sure you wish to do this as it has performance implications. This is                                  useful if you are creating multiple instances from same base data and then                                  wish to modify each instance.</td></tr> <tr><td>schema</td> <td><a href="#Schema"><code>Schema</code></a></td> <td>schema instance</td></tr> <tr><td>name</td> <td><code>String</code></td> <td>the model name</td></tr></tbody></table> <p><a name="Document+modelName"></a></p> <h3 id="document-modelname-string"><a href="#document-modelname-string" aria-hidden="true" class="header-anchor">#</a> document.modelName : <code>String</code></h3> <p>The name the name of the model. This is both a static and instance property.</p> <p><strong>Kind</strong>: instance property of <a href="#Document"><code>Document</code></a><br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Cat <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> kitty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Zildjian'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Cat<span class="token punctuation">.</span>modelName<span class="token punctuation">)</span> <span class="token comment">// 'Cat'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>kitty<span class="token punctuation">.</span>modelName<span class="token punctuation">)</span> <span class="token comment">// 'Cat'</span>
</code></pre></div><p><a name="Document+_isNew"></a></p> <h3 id="document-isnew-boolean"><a href="#document-isnew-boolean" aria-hidden="true" class="header-anchor">#</a> document._isNew : <code>Boolean</code></h3> <p>Has a key been generated for this document.</p> <p><strong>Kind</strong>: instance property of <a href="#Document"><code>Document</code></a><br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Cat <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> kitty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Zildjian'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>kitty<span class="token punctuation">.</span>_isNew<span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token keyword">var</span> kat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'123abc'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Sabian'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>kat<span class="token punctuation">.</span>_isNew<span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><p><a name="Document+getDocumentKeyValue"></a></p> <h3 id="document-getdocumentkeyvalue-full-⇒-string"><a href="#document-getdocumentkeyvalue-full-⇒-string" aria-hidden="true" class="header-anchor">#</a> document.getDocumentKeyValue(full) ⇒ <code>String</code></h3> <p>Helper function to get the document key.</p> <p><strong>Kind</strong>: instance method of <a href="#Document"><code>Document</code></a><br> <strong>Returns</strong>: <code>String</code> - document key<br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>full</td> <td><code>Boolean</code></td> <td>If <code>true</code> the full expanded value of the key will be returned.                  If there were any suffix and / or prefix defined in schema they are applied.</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> keyPrefix<span class="token punctuation">:</span> <span class="token string">'user::'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> <span class="token string">'bsmith@acme.com'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 114477a8-1901-4146-8c90-0fc9eec57a58</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// user::114477a8-1901-4146-8c90-0fc9eec57a58</span>
</code></pre></div><p><a name="Document+getDocumentKeyKey"></a></p> <h3 id="document-getdocumentkeykey-⇒-string"><a href="#document-getdocumentkeykey-⇒-string" aria-hidden="true" class="header-anchor">#</a> document.getDocumentKeyKey() ⇒ <code>String</code></h3> <p>Gets the Document key property name.</p> <p><strong>Kind</strong>: instance method of <a href="#Document"><code>Document</code></a><br> <strong>Returns</strong>: <code>String</code> - Document key property name<br> <strong>Access</strong>: public<br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span> String<span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> generate<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> <span class="token string">'bsmith@acme.com'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDocumentKeyKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// email</span>
</code></pre></div><p><a name="Document.getDocumentKeyKey"></a></p> <h3 id="document-getdocumentkeykey-⇒-string-2"><a href="#document-getdocumentkeykey-⇒-string-2" aria-hidden="true" class="header-anchor">#</a> Document.getDocumentKeyKey() ⇒ <code>String</code></h3> <p>Gets the Document key property name.</p> <p><strong>Kind</strong>: static method of <a href="#Document"><code>Document</code></a><br> <strong>Returns</strong>: <code>String</code> - Document key property name<br> <strong>Access</strong>: public<br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span> String<span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> generate<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">getDocumentKeyKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// email</span>
</code></pre></div><p><a name="Document.getDocumentKeyValue"></a></p> <h3 id="document-getdocumentkeyvalue-id-full-⇒-string"><a href="#document-getdocumentkeyvalue-id-full-⇒-string" aria-hidden="true" class="header-anchor">#</a> Document.getDocumentKeyValue(id, full) ⇒ <code>string</code></h3> <p>Static version of <code>getDocumentKeyValue</code>.</p> <p><strong>Kind</strong>: static method of <a href="#Document"><code>Document</code></a><br> <strong>Returns</strong>: <code>string</code> - Document key / id<br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>id</td> <td><code>String</code></td> <td>id of the document</td></tr> <tr><td>full</td> <td><code>Boolean</code></td> <td>If <code>true</code> the full expanded value of the key will be returned.                  If there were any suffix and / or prefix defined in schema they are applied.</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// assuming keyPrefix: 'user::'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token string">'114477a8-1901-4146-8c90-0fc9eec57a58'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// user::114477a8-1901-4146-8c90-0fc9eec57a58</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token string">'user::114477a8-1901-4146-8c90-0fc9eec57a58'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// user::114477a8-1901-4146-8c90-0fc9eec57a58</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token string">'user::114477a8-1901-4146-8c90-0fc9eec57a58'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 114477a8-1901-4146-8c90-0fc9eec57a58</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token string">'114477a8-1901-4146-8c90-0fc9eec57a58'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 114477a8-1901-4146-8c90-0fc9eec57a58</span>
</code></pre></div><p><a name="Lounge"></a></p> <h2 id="lounge-⇐-bucket"><a href="#lounge-⇐-bucket" aria-hidden="true" class="header-anchor">#</a> Lounge ⇐ <code>Bucket</code></h2> <p>The Lounge module
The exports object of the <code>lounge</code> module is an instance of this class.
Most apps will only use this one instance. We copy all Couchbase <code>Bucket</code> methods and properties
so you can call them generically = require(this instance as well.</p> <p><strong>Kind</strong>: global class<br> <strong>Extends</strong>: <code>Bucket</code></p> <ul><li><a href="#Lounge">Lounge</a> ⇐ <code>Bucket</code> <ul><li><a href="#new_Lounge_new">new Lounge(options)</a></li> <li><a href="#Lounge+Schema">.Schema</a></li> <li><a href="#Lounge+Model">.Model</a></li> <li><a href="#Lounge+CouchbaseDocument">.CouchbaseDocument</a></li> <li><a href="#Lounge+Document">.Document</a></li> <li><a href="#Lounge+Lounge">.Lounge</a></li> <li><a href="#Lounge+connect">.connect(options, fn)</a> ⇒ <code>Bucket</code></li> <li><a href="#Lounge+disconnect">.disconnect()</a></li> <li><a href="#Lounge+schema">.schema(descriptor, options)</a> ⇒ <a href="#Schema"><code>Schema</code></a></li> <li><a href="#Lounge+model">.model(name, schema, options)</a> ⇒ <a href="#ModelInstance"><code>ModelInstance</code></a></li> <li><a href="#Lounge+getModel">.getModel(name)</a> ⇒ <a href="#Model"><code>Model</code></a> | <code>undefined</code></li> <li><a href="#Lounge+setOption">.setOption(key, value)</a></li> <li><a href="#Lounge+getOption">.getOption(key)</a> ⇒ <code>*</code></li> <li><a href="#Lounge+modelNames">.modelNames()</a> ⇒ <code>Array</code></li></ul></li></ul> <p><a name="new_Lounge_new"></a></p> <h3 id="new-lounge-options"><a href="#new-lounge-options" aria-hidden="true" class="header-anchor">#</a> new Lounge(options)</h3> <p>The Lounge constructor</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td></td></tr> <tr><td>options.keyPrefix</td> <td><code>String</code></td> <td>key prefix for all keys. No default. Generally useful if you wish to namespace documents. Example: <code>app::env::</code>.</td></tr> <tr><td>options.keySuffix</td> <td><code>String</code></td> <td>Similar as prefix but used as a suffix</td></tr> <tr><td>options.storeFullReferenceId</td> <td><code>Boolean</code></td> <td>whether to store embedded document keys as fully expanded keys (with prefix and suffix applied) or just the minimized version. default: <code>false</code></td></tr> <tr><td>options.storeFullKey</td> <td><code>Boolean</code></td> <td>Similarly to store the fully expanded document key inside the key property. default: <code>false</code></td></tr> <tr><td>options.alwaysReturnArrays</td> <td><code>Boolean</code></td> <td>set to true to force <code>findyById</code> to always return an array of documents even if only a single key is passed in</td></tr> <tr><td>options.refIndexKeyPrefix</td> <td><code>String</code></td> <td>reference lookup index document key prefix. The name of the index is appended. default: <code>$<em>ref_by</em></code></td></tr> <tr><td>options.delimiter</td> <td><code>String</code></td> <td>delimiter string used for concatenation in reference document key expansion / generation. default: <code>'_'</code>. This is prepended to the reference document key.</td></tr> <tr><td>options.waitForIndex</td> <td><code>Boolean</code></td> <td>When documents are saved, indexes are updated. We can wait for this operation to finish before returning = require(<code>save()</code>. Default: <code>false</code></td></tr> <tr><td>options.minimize</td> <td><code>Boolean</code></td> <td>&quot;minimize&quot; schemas by removing empty objects. Default: <code>true</code></td></tr> <tr><td>options.missing</td> <td><code>Boolean</code></td> <td>By default the <code>findById</code> and index query functions return 3 parameters to the callback:                                  <code>(err, docs, missing)</code>. If this option is set to <code>false</code> we won't return                                  missing keys as the final param in the callback. Default: <code>true</code>.</td></tr> <tr><td>options.retryTemporaryErrors</td> <td><code>Boolean</code></td> <td>Whether to automatically backoff/retry on temporary                                       couchbase errors. Default: <code>false</code>.                                            See <a href="https://github.com/bojand/couchbase-driver" target="_blank" rel="noopener noreferrer">https://github.com/bojand/couchbase-driver<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td>options.tempRetryTimes</td> <td><code>Number</code></td> <td>The number of attempts to make when backing off temporary errors.                                            See <code>async.retry</code>. Default: <code>5</code>.                                            See <a href="https://github.com/bojand/couchbase-driver" target="_blank" rel="noopener noreferrer">https://github.com/bojand/couchbase-driver<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td>options.tempRetryInterval</td> <td><code>Number</code></td> <td>The time to wait between retries, in milliseconds, when backing off temporary errors .                                               See <code>async.retry</code>. Default: <code>50</code>.                                            See <a href="https://github.com/bojand/couchbase-driver" target="_blank" rel="noopener noreferrer">https://github.com/bojand/couchbase-driver<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td>options.atomicRetryTimes</td> <td><code>Number</code></td> <td>The number of attempts to make within <code>Driver.atomic()</code>. Default: <code>5</code>.                                            See <a href="https://github.com/bojand/couchbase-driver" target="_blank" rel="noopener noreferrer">https://github.com/bojand/couchbase-driver<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td>options.atomicRetryInterval</td> <td><code>Number</code></td> <td>The time to wait between retries, in milliseconds, within <code>Driver.atomic()</code>.                                               Default: <code>0</code>. See <a href="https://github.com/bojand/couchbase-driver" target="_blank" rel="noopener noreferrer">https://github.com/bojand/couchbase-driver<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td>options.atomicLock</td> <td><code>Boolean</code></td> <td>Whether to use <code>getAndLock</code> or standard <code>get</code> during atomic                                       operations within indexing. Default: <code>true</code>.                                       See <a href="https://github.com/bojand/couchbase-driver" target="_blank" rel="noopener noreferrer">https://github.com/bojand/couchbase-driver<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td>options.promisify</td> <td><code>Boolean</code></td> <td>to enable promise support. By default all async functions support promises and return a promise.                                      To disable promise support set this  option to <code>false</code>, ideally at start before                                      doing <code>connect</code> or any other operations. Default: <code>true</code>.</td></tr> <tr><td>options.errorOnMissingIndex</td> <td><code>Boolean</code></td> <td>error when a document referenced by index reference document is missing. Default: <code>false</code>                                                The error will have <code>reference</code> property of document reference target document id(s).                                                The error will have <code>missing</code> property of missing document ids.</td></tr> <tr><td>options.emitErrors</td> <td><code>Boolean</code></td> <td>Whether to broadcast error events. Default: <code>true</code></td></tr></tbody></table> <p><a name="Lounge+Schema"></a></p> <h3 id="lounge-schema"><a href="#lounge-schema" aria-hidden="true" class="header-anchor">#</a> lounge.Schema</h3> <p>The Lounge Schema constructor</p> <p><strong>Kind</strong>: instance property of <a href="#Lounge"><code>Lounge</code></a><br> <a name="Lounge+Model"></a></p> <h3 id="lounge-model"><a href="#lounge-model" aria-hidden="true" class="header-anchor">#</a> lounge.Model</h3> <p>The Lounge Model constructor.</p> <p><strong>Kind</strong>: instance property of <a href="#Lounge"><code>Lounge</code></a><br> <a name="Lounge+CouchbaseDocument"></a></p> <h3 id="lounge-couchbasedocument"><a href="#lounge-couchbasedocument" aria-hidden="true" class="header-anchor">#</a> lounge.CouchbaseDocument</h3> <p>The Lounge CouchbaseDocument constructor.</p> <p><strong>Kind</strong>: instance property of <a href="#Lounge"><code>Lounge</code></a><br> <a name="Lounge+Document"></a></p> <h3 id="lounge-document"><a href="#lounge-document" aria-hidden="true" class="header-anchor">#</a> lounge.Document</h3> <p>The Lounge Document constructor.</p> <p><strong>Kind</strong>: instance property of <a href="#Lounge"><code>Lounge</code></a><br> <a name="Lounge+Lounge"></a></p> <h3 id="lounge-lounge"><a href="#lounge-lounge" aria-hidden="true" class="header-anchor">#</a> lounge.Lounge</h3> <p>The Lounge constructor
The exports of the Lounge module is an instance of this class.</p> <p><strong>Kind</strong>: instance property of <a href="#Lounge"><code>Lounge</code></a><br> <a name="Lounge+connect"></a></p> <h3 id="lounge-connect-options-fn-⇒-bucket"><a href="#lounge-connect-options-fn-⇒-bucket" aria-hidden="true" class="header-anchor">#</a> lounge.connect(options, fn) ⇒ <code>Bucket</code></h3> <p>Connect to the database. You may define Models before connecting, but you should not create any actual document
instances before connecting to the database.</p> <p><strong>Kind</strong>: instance method of <a href="#Lounge"><code>Lounge</code></a><br> <strong>Returns</strong>: <code>Bucket</code> - Couchbase <code>Bucket</code> instance<br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td></td></tr> <tr><td>options.connectionString</td> <td><code>String</code></td> <td>connection string for the cluster</td></tr> <tr><td>options.bucket</td> <td><code>String</code> | <code>Bucket</code></td> <td>name of the bucket or the actual Couchbase <code>bucket</code> instance</td></tr> <tr><td>options.username</td> <td><code>String</code></td> <td>username</td></tr> <tr><td>options.password</td> <td><code>String</code></td> <td>password</td></tr> <tr><td>options.certpath</td> <td><code>String</code></td> <td>certpath for cluster</td></tr> <tr><td>options.mock</td> <td><code>Boolean</code></td> <td>whether to use mocking</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>lounge<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  connectionString<span class="token punctuation">:</span> <span class="token string">'couchbase://127.0.0.1'</span><span class="token punctuation">,</span>
  bucket<span class="token punctuation">:</span> <span class="token string">'lounge_test'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="Lounge+disconnect"></a></p> <h3 id="lounge-disconnect"><a href="#lounge-disconnect" aria-hidden="true" class="header-anchor">#</a> lounge.disconnect()</h3> <p>Disconnect = require(the bucket. Deletes all defined models.</p> <p><strong>Kind</strong>: instance method of <a href="#Lounge"><code>Lounge</code></a><br> <a name="Lounge+schema"></a></p> <h3 id="lounge-schema-descriptor-options-⇒-schema"><a href="#lounge-schema-descriptor-options-⇒-schema" aria-hidden="true" class="header-anchor">#</a> lounge.schema(descriptor, options) ⇒ <a href="#Schema"><code>Schema</code></a></h3> <p>Creates a schema. Prefer to use this over Schema constructor as this will pass along Lounge config settings.</p> <p><strong>Kind</strong>: instance method of <a href="#Lounge"><code>Lounge</code></a><br> <strong>Returns</strong>: <a href="#Schema"><code>Schema</code></a> - created <code>Schema</code> instance<br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>descriptor</td> <td><code>Object</code></td> <td>the schema descriptor</td></tr> <tr><td>options</td> <td><code>Object</code></td> <td>Schema options</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="Lounge+model"></a></p> <h3 id="lounge-model-name-schema-options-⇒-modelinstance"><a href="#lounge-model-name-schema-options-⇒-modelinstance" aria-hidden="true" class="header-anchor">#</a> lounge.model(name, schema, options) ⇒ <a href="#ModelInstance"><code>ModelInstance</code></a></h3> <p>Creates a model = require(a schema.</p> <p><strong>Kind</strong>: instance method of <a href="#Lounge"><code>Lounge</code></a><br> <strong>Returns</strong>: <a href="#ModelInstance"><code>ModelInstance</code></a> - The created <code>ModelInstance</code> class.<br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td><code>String</code></td> <td>name of the model.</td></tr> <tr><td>schema</td> <td><a href="#Schema"><code>Schema</code></a></td> <td>instance</td></tr> <tr><td>options</td> <td><code>Object</code></td> <td></td></tr> <tr><td>options.freeze</td> <td><code>Object</code></td> <td>to Freeze model. See <code>Object.freeze</code>. Default: <code>true</code></td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> Cat <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
</code></pre></div><p><a name="Lounge+getModel"></a></p> <h3 id="lounge-getmodel-name-⇒-model-undefined"><a href="#lounge-getmodel-name-⇒-model-undefined" aria-hidden="true" class="header-anchor">#</a> lounge.getModel(name) ⇒ <a href="#Model"><code>Model</code></a> | <code>undefined</code></h3> <p>Returns the model given the name.</p> <p><strong>Kind</strong>: instance method of <a href="#Lounge"><code>Lounge</code></a><br> <strong>Returns</strong>: <a href="#Model"><code>Model</code></a> | <code>undefined</code> - The <code>ModelInstance</code> or <code>undefined</code> if the model by that name does
not exist.</p> <table><thead><tr><th>Param</th></tr></thead> <tbody><tr><td>name</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> Cat <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">getModel</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="Lounge+setOption"></a></p> <h3 id="lounge-setoption-key-value"><a href="#lounge-setoption-key-value" aria-hidden="true" class="header-anchor">#</a> lounge.setOption(key, value)</h3> <p>Sets lounge config options</p> <p><strong>Kind</strong>: instance method of <a href="#Lounge"><code>Lounge</code></a><br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>key</td> <td><code>String</code></td> <td>the config key</td></tr> <tr><td>value</td> <td><code>*</code></td> <td>option value</td></tr></tbody></table> <p><a name="Lounge+getOption"></a></p> <h3 id="lounge-getoption-key-⇒"><a href="#lounge-getoption-key-⇒" aria-hidden="true" class="header-anchor">#</a> lounge.getOption(key) ⇒ <code>*</code></h3> <p>Get config option.</p> <p><strong>Kind</strong>: instance method of <a href="#Lounge"><code>Lounge</code></a><br> <strong>Returns</strong>: <code>*</code> - Option value</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>key</td> <td><code>String</code></td> <td>the config key</td></tr></tbody></table> <p><a name="Lounge+modelNames"></a></p> <h3 id="lounge-modelnames-⇒-array"><a href="#lounge-modelnames-⇒-array" aria-hidden="true" class="header-anchor">#</a> lounge.modelNames() ⇒ <code>Array</code></h3> <p>Returns an array of model names created on this instance of Lounge.</p> <p><strong>Kind</strong>: instance method of <a href="#Lounge"><code>Lounge</code></a><br> <strong>Returns</strong>: <code>Array</code> - Array of model names registered.<br> <strong>Access</strong>: public<br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lounge<span class="token punctuation">.</span><span class="token function">modelNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [ 'Cat', 'Dog' ]</span>
</code></pre></div><p><a name="Model"></a></p> <h2 id="model-⇐-couchbasedocument"><a href="#model-⇐-couchbasedocument" aria-hidden="true" class="header-anchor">#</a> Model ⇐ <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a></h2> <p>Model class is a base class for all <code>ModelInstances</code> and it extends <code>CouchbaseDocument</code></p> <p><strong>Kind</strong>: global class<br> <strong>Extends</strong>: <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a></p> <ul><li><a href="#Model">Model</a> ⇐ <a href="#CouchbaseDocument"><code>CouchbaseDocument</code></a> <ul><li><a href="#new_Model_new">new Model()</a></li> <li><a href="#CouchbaseDocument+cas">.cas</a> ⇒ <code>String</code></li> <li><a href="#CouchbaseDocument+db">.db</a> ⇒ <code>Driver</code> | <code>null</code></li> <li><a href="#CouchbaseDocument+config">.config</a> ⇒ <code>Object</code></li> <li><a href="#Document+modelName">.modelName</a> : <code>String</code></li> <li><a href="#Document+_isNew">._isNew</a> : <code>Boolean</code></li> <li><a href="#CouchbaseDocument+getCAS">.getCAS(raw)</a> ⇒ <code>String</code> | <code>Object</code></li> <li><a href="#CouchbaseDocument+save">.save(options, replicate_to, fn)</a></li> <li><a href="#CouchbaseDocument+index">.index(options, fn)</a></li> <li><a href="#CouchbaseDocument+remove">.remove(options, fn)</a></li> <li><a href="#CouchbaseDocument+removeIndexes">.removeIndexes(options, fn)</a></li> <li><a href="#CouchbaseDocument+populate">.populate(options, fn)</a></li> <li><a href="#Document+getDocumentKeyValue">.getDocumentKeyValue(full)</a> ⇒ <code>String</code></li> <li><a href="#Document+getDocumentKeyKey">.getDocumentKeyKey()</a> ⇒ <code>String</code></li></ul></li></ul> <p><a name="new_Model_new"></a></p> <h3 id="new-model"><a href="#new-model" aria-hidden="true" class="header-anchor">#</a> new Model()</h3> <p>Model class is a base class for all <code>ModelInstances</code> and it extends <code>CouchbaseDocument</code></p> <p><a name="CouchbaseDocument+cas"></a></p> <h3 id="model-cas-⇒-string"><a href="#model-cas-⇒-string" aria-hidden="true" class="header-anchor">#</a> model.cas ⇒ <code>String</code></h3> <p>Returns the string representation of <code>CAS</code> value.</p> <p><strong>Kind</strong>: instance property of <a href="#Model"><code>Model</code></a><br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>cas<span class="token punctuation">)</span> <span class="token comment">// String: 00000000a71626e4</span>
</code></pre></div><p><a name="CouchbaseDocument+db"></a></p> <h3 id="model-db-⇒-driver-null"><a href="#model-db-⇒-driver-null" aria-hidden="true" class="header-anchor">#</a> model.db ⇒ <code>Driver</code> | <code>null</code></h3> <p>Gets the database driver of the model</p> <p><strong>Kind</strong>: instance property of <a href="#Model"><code>Model</code></a><br> <a name="CouchbaseDocument+config"></a></p> <h3 id="model-config-⇒-object"><a href="#model-config-⇒-object" aria-hidden="true" class="header-anchor">#</a> model.config ⇒ <code>Object</code></h3> <p>Gets the config object</p> <p><strong>Kind</strong>: instance property of <a href="#Model"><code>Model</code></a><br> <a name="Document+modelName"></a></p> <h3 id="model-modelname-string"><a href="#model-modelname-string" aria-hidden="true" class="header-anchor">#</a> model.modelName : <code>String</code></h3> <p>The name the name of the model. This is both a static and instance property.</p> <p><strong>Kind</strong>: instance property of <a href="#Model"><code>Model</code></a><br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Cat <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> kitty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Zildjian'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Cat<span class="token punctuation">.</span>modelName<span class="token punctuation">)</span> <span class="token comment">// 'Cat'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>kitty<span class="token punctuation">.</span>modelName<span class="token punctuation">)</span> <span class="token comment">// 'Cat'</span>
</code></pre></div><p><a name="Document+_isNew"></a></p> <h3 id="model-isnew-boolean"><a href="#model-isnew-boolean" aria-hidden="true" class="header-anchor">#</a> model._isNew : <code>Boolean</code></h3> <p>Has a key been generated for this document.</p> <p><strong>Kind</strong>: instance property of <a href="#Model"><code>Model</code></a><br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Cat <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> kitty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Zildjian'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>kitty<span class="token punctuation">.</span>_isNew<span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token keyword">var</span> kat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'123abc'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Sabian'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>kat<span class="token punctuation">.</span>_isNew<span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><p><a name="CouchbaseDocument+getCAS"></a></p> <h3 id="model-getcas-raw-⇒-string-object"><a href="#model-getcas-raw-⇒-string-object" aria-hidden="true" class="header-anchor">#</a> model.getCAS(raw) ⇒ <code>String</code> | <code>Object</code></h3> <p>Returns the document <code>CAS</code> value.</p> <p><strong>Kind</strong>: instance method of <a href="#Model"><code>Model</code></a><br> <strong>Returns</strong>: <code>String</code> | <code>Object</code> - the CAS value</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>raw</td> <td><code>Boolean</code></td> <td>If <code>true</code> returns the raw CAS document. If <code>false</code> returns string                        representation of CAS. Defaults to <code>false</code>.</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">getCAS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// String: 00000000a71626e4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">getCAS</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Object: CouchbaseCas&lt;11338961768815788032&gt;</span>
</code></pre></div><p><a name="CouchbaseDocument+save"></a></p> <h3 id="model-save-options-replicate-to-fn"><a href="#model-save-options-replicate-to-fn" aria-hidden="true" class="header-anchor">#</a> model.save(options, replicate_to, fn)</h3> <p>Save the current model instance. Calls db set function for the model id and saves the properties.</p> <p><strong>Kind</strong>: instance method of <a href="#Model"><code>Model</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td>The save options. All options not present here are first looked up from schema options, and then from config options.</td></tr> <tr><td>options.storeFullReferenceId</td> <td><code>Boolean</code></td> <td>whether to save embedded document property values as full document keys or just the base value</td></tr> <tr><td>options.storeFullKey</td> <td><code>Boolean</code></td> <td>whether to save the internal document key property as fully expanded value or as the simple value</td></tr> <tr><td>options.refIndexKeyPrefix</td> <td><code>String</code></td> <td>lookup index document key prefix.</td></tr> <tr><td>options.waitForIndex</td> <td><code>Boolean</code></td> <td>whether we want to wait for indexing to finish before returning. Default: <code>false</code>.</td></tr> <tr><td>options.virtuals</td> <td><code>Boolean</code></td> <td>whether we want to save virtuals. Default: <code>false</code>.</td></tr> <tr><td>options.minimize</td> <td><code>Boolean</code></td> <td>to &quot;minimize&quot; the document by removing any empty properties. Default: <code>true</code></td></tr> <tr><td>options.expiry</td> <td><code>Number</code></td> <td>couchbase upsert option</td></tr> <tr><td>options.persist_to</td> <td><code>Number</code></td> <td>couchbase persist_to option</td></tr> <tr><td>replicate_to</td> <td><code>Number</code></td> <td>couchbase option</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Bob Smith'</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">'bsmith@acme.com'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
user<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> savedDoc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="CouchbaseDocument+index"></a></p> <h3 id="model-index-options-fn"><a href="#model-index-options-fn" aria-hidden="true" class="header-anchor">#</a> model.index(options, fn)</h3> <p>Update all lookup documents for this document instance. Creates new lookup documents for properties that have changed
and deletes the old ones not needed any more.</p> <p><strong>Kind</strong>: instance method of <a href="#Model"><code>Model</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td></td></tr> <tr><td>options.storeFullReferenceId</td> <td><code>Boolean</code></td> <td>whether we store full document id in reference documents</td></tr> <tr><td>options.atomicLock</td> <td><code>Boolean</code></td> <td>whether to use atomicLock</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><a name="CouchbaseDocument+remove"></a></p> <h3 id="model-remove-options-fn"><a href="#model-remove-options-fn" aria-hidden="true" class="header-anchor">#</a> model.remove(options, fn)</h3> <p>Removes the instance from the database.
Calls the bucket <code>remove()</code> function. Options can be passed to the driver.</p> <p><strong>Kind</strong>: instance method of <a href="#Model"><code>Model</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td>Options to be passed to the Couchbase <code>Bucket.remove()</code> function.</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>user<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> doc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="CouchbaseDocument+removeIndexes"></a></p> <h3 id="model-removeindexes-options-fn"><a href="#model-removeindexes-options-fn" aria-hidden="true" class="header-anchor">#</a> model.removeIndexes(options, fn)</h3> <p>Removes all lookup / index documents for this document.</p> <p><strong>Kind</strong>: instance method of <a href="#Model"><code>Model</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td></td></tr> <tr><td>options.storeFullReferenceId</td> <td><code>Boolean</code></td> <td>whether we store full document id in reference documents</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><a name="CouchbaseDocument+populate"></a></p> <h3 id="model-populate-options-fn"><a href="#model-populate-options-fn" aria-hidden="true" class="header-anchor">#</a> model.populate(options, fn)</h3> <p>Populates this instance given the options</p> <p><strong>Kind</strong>: instance method of <a href="#Model"><code>Model</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Boolean</code> | <code>String</code> | <code>Array</code></td> <td>populate options, can be a <code>Boolean</code>;                               <code>String</code> representing a path;                               <code>Object</code> with form <code>{ path: String, target: String}</code> where                               <code>path</code> is the path to be populated and <code>target</code> is the target                               field into which to populate. If this format is used, <code>target</code> should be                               part of schema;                               or an <code>Array</code> of                               <code>Strings</code> or <code>Object</code>.</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>Callback</td></tr></tbody></table> <p><strong>Example</strong> <em>(Populate an instance)</em></p> <div class="language-js extra-class"><pre class="language-js"><code>User<span class="token punctuation">.</span><span class="token function">findBy</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>company<span class="token punctuation">)</span> <span class="token comment">// ID</span>
  user<span class="token punctuation">.</span><span class="token function">populate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> populatedUser</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>company<span class="token punctuation">)</span> <span class="token comment">// full populated sub documnet</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Example</strong> <em>(Populate a specific path within an instance)</em></p> <div class="language-js extra-class"><pre class="language-js"><code>User<span class="token punctuation">.</span><span class="token function">findBy</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>company<span class="token punctuation">)</span> <span class="token comment">// ID</span>
  user<span class="token punctuation">.</span><span class="token function">populate</span><span class="token punctuation">(</span><span class="token string">'company'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> populatedUser</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>company<span class="token punctuation">)</span> <span class="token comment">// full populated sub documnet</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="Document+getDocumentKeyValue"></a></p> <h3 id="model-getdocumentkeyvalue-full-⇒-string"><a href="#model-getdocumentkeyvalue-full-⇒-string" aria-hidden="true" class="header-anchor">#</a> model.getDocumentKeyValue(full) ⇒ <code>String</code></h3> <p>Helper function to get the document key.</p> <p><strong>Kind</strong>: instance method of <a href="#Model"><code>Model</code></a><br> <strong>Returns</strong>: <code>String</code> - document key<br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>full</td> <td><code>Boolean</code></td> <td>If <code>true</code> the full expanded value of the key will be returned.                  If there were any suffix and / or prefix defined in schema they are applied.</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> keyPrefix<span class="token punctuation">:</span> <span class="token string">'user::'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> <span class="token string">'bsmith@acme.com'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 114477a8-1901-4146-8c90-0fc9eec57a58</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// user::114477a8-1901-4146-8c90-0fc9eec57a58</span>
</code></pre></div><p><a name="Document+getDocumentKeyKey"></a></p> <h3 id="model-getdocumentkeykey-⇒-string"><a href="#model-getdocumentkeykey-⇒-string" aria-hidden="true" class="header-anchor">#</a> model.getDocumentKeyKey() ⇒ <code>String</code></h3> <p>Gets the Document key property name.</p> <p><strong>Kind</strong>: instance method of <a href="#Model"><code>Model</code></a><br> <strong>Returns</strong>: <code>String</code> - Document key property name<br> <strong>Access</strong>: public<br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span> String<span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> generate<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> <span class="token string">'bsmith@acme.com'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDocumentKeyKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// email</span>
</code></pre></div><p><a name="ModelInstance"></a></p> <h2 id="modelinstance-⇐-model"><a href="#modelinstance-⇐-model" aria-hidden="true" class="header-anchor">#</a> ModelInstance ⇐ <a href="#Model"><code>Model</code></a></h2> <p>ModelInstance class is the compiled class from a schema definition. It extends <code>Model</code>.
All models generated are an instance of <code>ModelInstance</code>. It also inherits <code>grappling-hook</code>
See <a href="https://www.github.com/bojand/grappling-hook" target="_blank" rel="noopener noreferrer">grappling-hook<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for pre and post hooks.</p> <p><strong>Kind</strong>: global class<br> <strong>Extends</strong>: <a href="#Model"><code>Model</code></a></p> <ul><li><a href="#ModelInstance">ModelInstance</a> ⇐ <a href="#Model"><code>Model</code></a> <ul><li><a href="#new_ModelInstance_new">new ModelInstance(data, options, cas)</a></li> <li><em>instance</em> <ul><li><a href="#CouchbaseDocument+cas">.cas</a> ⇒ <code>String</code></li> <li><a href="#CouchbaseDocument+db">.db</a> ⇒ <code>Driver</code> | <code>null</code></li> <li><a href="#CouchbaseDocument+config">.config</a> ⇒ <code>Object</code></li> <li><a href="#Document+modelName">.modelName</a> : <code>String</code></li> <li><a href="#Document+_isNew">._isNew</a> : <code>Boolean</code></li> <li><a href="#CouchbaseDocument+getCAS">.getCAS(raw)</a> ⇒ <code>String</code> | <code>Object</code></li> <li><a href="#CouchbaseDocument+save">.save(options, replicate_to, fn)</a></li> <li><a href="#CouchbaseDocument+index">.index(options, fn)</a></li> <li><a href="#CouchbaseDocument+remove">.remove(options, fn)</a></li> <li><a href="#CouchbaseDocument+removeIndexes">.removeIndexes(options, fn)</a></li> <li><a href="#CouchbaseDocument+populate">.populate(options, fn)</a></li> <li><a href="#Document+getDocumentKeyValue">.getDocumentKeyValue(full)</a> ⇒ <code>String</code></li> <li><a href="#Document+getDocumentKeyKey">.getDocumentKeyKey()</a> ⇒ <code>String</code></li></ul></li> <li><em>static</em> <ul><li><a href="#ModelInstance.schema">.schema</a></li> <li><a href="#ModelInstance.modelName">.modelName</a></li> <li><a href="#ModelInstance.lounge">.lounge</a></li> <li><a href="#ModelInstance.config">.config</a></li> <li><a href="#ModelInstance.db">.db</a></li></ul></li></ul></li></ul> <p><a name="new_ModelInstance_new"></a></p> <h3 id="new-modelinstance-data-options-cas"><a href="#new-modelinstance-data-options-cas" aria-hidden="true" class="header-anchor">#</a> new ModelInstance(data, options, cas)</h3> <p>This would be the constructor for the generated models.</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>data</td> <td><code>Object</code></td> <td>the model instance data</td></tr> <tr><td>options</td> <td><code>Object</code></td> <td>optional creation options</td></tr> <tr><td>options.clone</td> <td><code>Boolean</code></td> <td>Whether to deep clone the incoming data. Default: <code>false</code>.                                  Make sure you wish to do this as it has performance implications. This is                                  useful if you are creating multiple instances from same base data and then                                  wish to modify each instance.</td></tr> <tr><td>cas</td> <td><code>Object</code></td> <td>the Couchbase <code>CAS</code> value</td></tr></tbody></table> <p><a name="CouchbaseDocument+cas"></a></p> <h3 id="modelinstance-cas-⇒-string"><a href="#modelinstance-cas-⇒-string" aria-hidden="true" class="header-anchor">#</a> modelInstance.cas ⇒ <code>String</code></h3> <p>Returns the string representation of <code>CAS</code> value.</p> <p><strong>Kind</strong>: instance property of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <strong>Overrides</strong>: <a href="#CouchbaseDocument+cas"><code>cas</code></a><br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>cas<span class="token punctuation">)</span> <span class="token comment">// String: 00000000a71626e4</span>
</code></pre></div><p><a name="CouchbaseDocument+db"></a></p> <h3 id="modelinstance-db-⇒-driver-null"><a href="#modelinstance-db-⇒-driver-null" aria-hidden="true" class="header-anchor">#</a> modelInstance.db ⇒ <code>Driver</code> | <code>null</code></h3> <p>Gets the database driver of the model</p> <p><strong>Kind</strong>: instance property of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <strong>Overrides</strong>: <a href="#CouchbaseDocument+db"><code>db</code></a><br> <a name="CouchbaseDocument+config"></a></p> <h3 id="modelinstance-config-⇒-object"><a href="#modelinstance-config-⇒-object" aria-hidden="true" class="header-anchor">#</a> modelInstance.config ⇒ <code>Object</code></h3> <p>Gets the config object</p> <p><strong>Kind</strong>: instance property of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <strong>Overrides</strong>: <a href="#CouchbaseDocument+config"><code>config</code></a><br> <a name="Document+modelName"></a></p> <h3 id="modelinstance-modelname-string"><a href="#modelinstance-modelname-string" aria-hidden="true" class="header-anchor">#</a> modelInstance.modelName : <code>String</code></h3> <p>The name the name of the model. This is both a static and instance property.</p> <p><strong>Kind</strong>: instance property of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <strong>Overrides</strong>: <a href="#Document+modelName"><code>modelName</code></a><br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Cat <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> kitty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Zildjian'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Cat<span class="token punctuation">.</span>modelName<span class="token punctuation">)</span> <span class="token comment">// 'Cat'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>kitty<span class="token punctuation">.</span>modelName<span class="token punctuation">)</span> <span class="token comment">// 'Cat'</span>
</code></pre></div><p><a name="Document+_isNew"></a></p> <h3 id="modelinstance-isnew-boolean"><a href="#modelinstance-isnew-boolean" aria-hidden="true" class="header-anchor">#</a> modelInstance._isNew : <code>Boolean</code></h3> <p>Has a key been generated for this document.</p> <p><strong>Kind</strong>: instance property of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <strong>Overrides</strong>: <a href="#Document+_isNew"><code>_isNew</code></a><br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Cat <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> kitty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Zildjian'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>kitty<span class="token punctuation">.</span>_isNew<span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token keyword">var</span> kat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'123abc'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Sabian'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>kat<span class="token punctuation">.</span>_isNew<span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><p><a name="CouchbaseDocument+getCAS"></a></p> <h3 id="modelinstance-getcas-raw-⇒-string-object"><a href="#modelinstance-getcas-raw-⇒-string-object" aria-hidden="true" class="header-anchor">#</a> modelInstance.getCAS(raw) ⇒ <code>String</code> | <code>Object</code></h3> <p>Returns the document <code>CAS</code> value.</p> <p><strong>Kind</strong>: instance method of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <strong>Overrides</strong>: <a href="#CouchbaseDocument+getCAS"><code>getCAS</code></a><br> <strong>Returns</strong>: <code>String</code> | <code>Object</code> - the CAS value</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>raw</td> <td><code>Boolean</code></td> <td>If <code>true</code> returns the raw CAS document. If <code>false</code> returns string                        representation of CAS. Defaults to <code>false</code>.</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">getCAS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// String: 00000000a71626e4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">getCAS</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Object: CouchbaseCas&lt;11338961768815788032&gt;</span>
</code></pre></div><p><a name="CouchbaseDocument+save"></a></p> <h3 id="modelinstance-save-options-replicate-to-fn"><a href="#modelinstance-save-options-replicate-to-fn" aria-hidden="true" class="header-anchor">#</a> modelInstance.save(options, replicate_to, fn)</h3> <p>Save the current model instance. Calls db set function for the model id and saves the properties.</p> <p><strong>Kind</strong>: instance method of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <strong>Overrides</strong>: <a href="#CouchbaseDocument+save"><code>save</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td>The save options. All options not present here are first looked up from schema options, and then from config options.</td></tr> <tr><td>options.storeFullReferenceId</td> <td><code>Boolean</code></td> <td>whether to save embedded document property values as full document keys or just the base value</td></tr> <tr><td>options.storeFullKey</td> <td><code>Boolean</code></td> <td>whether to save the internal document key property as fully expanded value or as the simple value</td></tr> <tr><td>options.refIndexKeyPrefix</td> <td><code>String</code></td> <td>lookup index document key prefix.</td></tr> <tr><td>options.waitForIndex</td> <td><code>Boolean</code></td> <td>whether we want to wait for indexing to finish before returning. Default: <code>false</code>.</td></tr> <tr><td>options.virtuals</td> <td><code>Boolean</code></td> <td>whether we want to save virtuals. Default: <code>false</code>.</td></tr> <tr><td>options.minimize</td> <td><code>Boolean</code></td> <td>to &quot;minimize&quot; the document by removing any empty properties. Default: <code>true</code></td></tr> <tr><td>options.expiry</td> <td><code>Number</code></td> <td>couchbase upsert option</td></tr> <tr><td>options.persist_to</td> <td><code>Number</code></td> <td>couchbase persist_to option</td></tr> <tr><td>replicate_to</td> <td><code>Number</code></td> <td>couchbase option</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Bob Smith'</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">'bsmith@acme.com'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
user<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> savedDoc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="CouchbaseDocument+index"></a></p> <h3 id="modelinstance-index-options-fn"><a href="#modelinstance-index-options-fn" aria-hidden="true" class="header-anchor">#</a> modelInstance.index(options, fn)</h3> <p>Update all lookup documents for this document instance. Creates new lookup documents for properties that have changed
and deletes the old ones not needed any more.</p> <p><strong>Kind</strong>: instance method of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <strong>Overrides</strong>: <a href="#CouchbaseDocument+index"><code>index</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td></td></tr> <tr><td>options.storeFullReferenceId</td> <td><code>Boolean</code></td> <td>whether we store full document id in reference documents</td></tr> <tr><td>options.atomicLock</td> <td><code>Boolean</code></td> <td>whether to use atomicLock</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><a name="CouchbaseDocument+remove"></a></p> <h3 id="modelinstance-remove-options-fn"><a href="#modelinstance-remove-options-fn" aria-hidden="true" class="header-anchor">#</a> modelInstance.remove(options, fn)</h3> <p>Removes the instance from the database.
Calls the bucket <code>remove()</code> function. Options can be passed to the driver.</p> <p><strong>Kind</strong>: instance method of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <strong>Overrides</strong>: <a href="#CouchbaseDocument+remove"><code>remove</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td>Options to be passed to the Couchbase <code>Bucket.remove()</code> function.</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>user<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> doc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="CouchbaseDocument+removeIndexes"></a></p> <h3 id="modelinstance-removeindexes-options-fn"><a href="#modelinstance-removeindexes-options-fn" aria-hidden="true" class="header-anchor">#</a> modelInstance.removeIndexes(options, fn)</h3> <p>Removes all lookup / index documents for this document.</p> <p><strong>Kind</strong>: instance method of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <strong>Overrides</strong>: <a href="#CouchbaseDocument+removeIndexes"><code>removeIndexes</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Object</code></td> <td></td></tr> <tr><td>options.storeFullReferenceId</td> <td><code>Boolean</code></td> <td>whether we store full document id in reference documents</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback</td></tr></tbody></table> <p><a name="CouchbaseDocument+populate"></a></p> <h3 id="modelinstance-populate-options-fn"><a href="#modelinstance-populate-options-fn" aria-hidden="true" class="header-anchor">#</a> modelInstance.populate(options, fn)</h3> <p>Populates this instance given the options</p> <p><strong>Kind</strong>: instance method of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <strong>Overrides</strong>: <a href="#CouchbaseDocument+populate"><code>populate</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><code>Boolean</code> | <code>String</code> | <code>Array</code></td> <td>populate options, can be a <code>Boolean</code>;                               <code>String</code> representing a path;                               <code>Object</code> with form <code>{ path: String, target: String}</code> where                               <code>path</code> is the path to be populated and <code>target</code> is the target                               field into which to populate. If this format is used, <code>target</code> should be                               part of schema;                               or an <code>Array</code> of                               <code>Strings</code> or <code>Object</code>.</td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>Callback</td></tr></tbody></table> <p><strong>Example</strong> <em>(Populate an instance)</em></p> <div class="language-js extra-class"><pre class="language-js"><code>User<span class="token punctuation">.</span><span class="token function">findBy</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>company<span class="token punctuation">)</span> <span class="token comment">// ID</span>
  user<span class="token punctuation">.</span><span class="token function">populate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> populatedUser</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>company<span class="token punctuation">)</span> <span class="token comment">// full populated sub documnet</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Example</strong> <em>(Populate a specific path within an instance)</em></p> <div class="language-js extra-class"><pre class="language-js"><code>User<span class="token punctuation">.</span><span class="token function">findBy</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>company<span class="token punctuation">)</span> <span class="token comment">// ID</span>
  user<span class="token punctuation">.</span><span class="token function">populate</span><span class="token punctuation">(</span><span class="token string">'company'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> populatedUser</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>company<span class="token punctuation">)</span> <span class="token comment">// full populated sub documnet</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="Document+getDocumentKeyValue"></a></p> <h3 id="modelinstance-getdocumentkeyvalue-full-⇒-string"><a href="#modelinstance-getdocumentkeyvalue-full-⇒-string" aria-hidden="true" class="header-anchor">#</a> modelInstance.getDocumentKeyValue(full) ⇒ <code>String</code></h3> <p>Helper function to get the document key.</p> <p><strong>Kind</strong>: instance method of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <strong>Overrides</strong>: <a href="#Document+getDocumentKeyValue"><code>getDocumentKeyValue</code></a><br> <strong>Returns</strong>: <code>String</code> - document key<br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>full</td> <td><code>Boolean</code></td> <td>If <code>true</code> the full expanded value of the key will be returned.                  If there were any suffix and / or prefix defined in schema they are applied.</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> keyPrefix<span class="token punctuation">:</span> <span class="token string">'user::'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> <span class="token string">'bsmith@acme.com'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 114477a8-1901-4146-8c90-0fc9eec57a58</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// user::114477a8-1901-4146-8c90-0fc9eec57a58</span>
</code></pre></div><p><a name="Document+getDocumentKeyKey"></a></p> <h3 id="modelinstance-getdocumentkeykey-⇒-string"><a href="#modelinstance-getdocumentkeykey-⇒-string" aria-hidden="true" class="header-anchor">#</a> modelInstance.getDocumentKeyKey() ⇒ <code>String</code></h3> <p>Gets the Document key property name.</p> <p><strong>Kind</strong>: instance method of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <strong>Overrides</strong>: <a href="#Document+getDocumentKeyKey"><code>getDocumentKeyKey</code></a><br> <strong>Returns</strong>: <code>String</code> - Document key property name<br> <strong>Access</strong>: public<br> <strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span> String<span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> generate<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> <span class="token string">'bsmith@acme.com'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDocumentKeyKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// email</span>
</code></pre></div><p><a name="ModelInstance.schema"></a></p> <h3 id="modelinstance-schema"><a href="#modelinstance-schema" aria-hidden="true" class="header-anchor">#</a> ModelInstance.schema</h3> <p>Schema the schema of this model.</p> <p><strong>Kind</strong>: static property of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <a name="ModelInstance.modelName"></a></p> <h3 id="modelinstance-modelname"><a href="#modelinstance-modelname" aria-hidden="true" class="header-anchor">#</a> ModelInstance.modelName</h3> <p>The name of the model.</p> <p><strong>Kind</strong>: static property of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <a name="ModelInstance.lounge"></a></p> <h3 id="modelinstance-lounge"><a href="#modelinstance-lounge" aria-hidden="true" class="header-anchor">#</a> ModelInstance.lounge</h3> <p>The static lounge instance in the model</p> <p><strong>Kind</strong>: static property of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <a name="ModelInstance.config"></a></p> <h3 id="modelinstance-config"><a href="#modelinstance-config" aria-hidden="true" class="header-anchor">#</a> ModelInstance.config</h3> <p>The config.</p> <p><strong>Kind</strong>: static property of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <a name="ModelInstance.db"></a></p> <h3 id="modelinstance-db"><a href="#modelinstance-db" aria-hidden="true" class="header-anchor">#</a> ModelInstance.db</h3> <p>The driver.</p> <p><strong>Kind</strong>: static property of <a href="#ModelInstance"><code>ModelInstance</code></a><br> <a name="Schema"></a></p> <h2 id="schema"><a href="#schema" aria-hidden="true" class="header-anchor">#</a> Schema</h2> <p>Schema class represents the schema definition. It includes properties, methods, static methods, and any
middleware we want to define.</p> <p><strong>Kind</strong>: global class<br> <strong>Access</strong>: public</p> <ul><li><a href="#Schema">Schema</a> <ul><li><a href="#new_Schema_new">new Schema(descriptor, options)</a></li> <li><a href="#Schema+index">.index(prop, options)</a></li> <li><a href="#Schema+method">.method(name, func)</a></li> <li><a href="#Schema+static">.static(name, val)</a></li> <li><a href="#Schema+virtual">.virtual(name, type, options)</a></li> <li><a href="#Schema+set">.set(key, [value])</a></li> <li><a href="#Schema+get">.get(key)</a> ⇒ <code>*</code></li> <li><a href="#Schema+pre">.pre()</a></li> <li><a href="#Schema+post">.post()</a></li> <li><a href="#Schema+add">.add(key, descriptor)</a></li> <li><a href="#Schema+extend">.extend(other)</a></li> <li><a href="#Schema+getDocumentKeyValue">.getDocumentKeyValue(id, full)</a> ⇒ <code>String</code></li> <li><a href="#Schema+getRefKey">.getRefKey(name, v)</a> ⇒ <code>string</code></li> <li><a href="#Schema+hasRefPath">.hasRefPath(path)</a> ⇒ <code>boolean</code></li></ul></li></ul> <p><a name="new_Schema_new"></a></p> <h3 id="new-schema-descriptor-options"><a href="#new-schema-descriptor-options" aria-hidden="true" class="header-anchor">#</a> new Schema(descriptor, options)</h3> <p>Creates an object schema</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>descriptor</td> <td><code>Object</code></td> <td>the schema definition</td></tr> <tr><td>options</td> <td><code>Object</code></td> <td></td></tr> <tr><td>options.strict</td> <td><code>Boolean</code></td> <td>By default (<code>true</code>), allow only values in the schema to be set.                                   When this is <code>false</code>, setting new fields will dynamically add the field                                   to the schema as type &quot;any&quot;.</td></tr> <tr><td>options.dotNotation</td> <td><code>Boolean</code></td> <td>Allow fields to be set via dot notation. Default: <code>true</code>.                                      <code>obj['user.name'] = 'Joe'; -&gt; obj: { user: 'Joe' }</code></td></tr> <tr><td>options.minimize</td> <td><code>Boolean</code></td> <td>&quot;minimize&quot; schemas by removing empty objects. Default: <code>true</code></td></tr> <tr><td>options.toObject</td> <td><code>Object</code></td> <td><code>toObject</code> method.</td></tr> <tr><td>options.toObject.minimize</td> <td><code>Boolean</code></td> <td>&quot;minimize&quot; schemas by removing empty objects. Default: <code>true</code></td></tr> <tr><td>options.toObject.transform</td> <td><code>function</code></td> <td>transform function</td></tr> <tr><td>options.toObject.virtuals</td> <td><code>Boolean</code></td> <td>whether to include virtual properties. Default: <code>false</code></td></tr> <tr><td>options.toObject.dateToISO</td> <td><code>Boolean</code></td> <td>convert dates to string in ISO format using <code>Date.toISOString()</code>. Default:  <code>false</code></td></tr> <tr><td>options.toJSON</td> <td><code>Object</code></td> <td>options for <code>toJSON</code> method options, similar to above</td></tr> <tr><td>options.strict</td> <td><code>Boolean</code></td> <td>ensures that value passed in to assigned that were not specified in our                                   schema do not get saved</td></tr> <tr><td>options.onBeforeValueSet</td> <td><code>function</code></td> <td>function called when write operations on an object takes place. Currently, it will only notify of write operations on the object itself and will not notify you when child objects are written to. If you return false or throw an error within the onBeforeValueSet handler, the write operation will be cancelled. Throwing an error will add the error to the error stack.</td></tr> <tr><td>options.onValueSet</td> <td><code>function</code></td> <td>Similar to <code>onBeforeValueSet</code>, but called after we've set a value on the key,</td></tr> <tr><td>options.saveOptions</td> <td><code>Object</code></td> <td>options for couchbase <code>save</code> method, such as <code>expiry</code>, <code>replicate_to</code>, and <code>persist_to</code>.                                       These options will propagate to all <code>save()</code> calls automatically and all index reference documents.                                       If a <code>save()</code> call has those options they are used over ones defined in the schema options.</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">lounge<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Example</strong> <em>(with &lt;code&gt;onBeforeValueSet&lt;/code&gt;)</em></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">onBeforeValueSet</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'name'</span> <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'Joe'</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
user<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Bill'</span> <span class="token comment">// name not set</span>
user<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Joe Smith'</span> <span class="token comment">//  { name: 'Joe Smith' }</span>
</code></pre></div><p><a name="Schema+index"></a></p> <h3 id="schema-index-prop-options"><a href="#schema-index-prop-options" aria-hidden="true" class="header-anchor">#</a> schema.index(prop, options)</h3> <p>Creates an index on the specified property.</p> <p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a><br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>prop</td> <td><code>String</code></td> <td>property to create the index on. If an array or property keys, generates compound key based                        on the property values, order matters.</td></tr> <tr><td>options</td> <td><code>Object</code></td> <td>index options</td></tr> <tr><td>options.indexName</td> <td><code>String</code></td> <td>the index name to be used for lookup function name generation.                                   - by default generated = require(property name.</td></tr> <tr><td>options.indexType</td> <td><code>String</code></td> <td>the index type. <code>'singe'</code> or <code>'array'</code>.                                   - default: <code>'single'</code></td></tr> <tr><td>options.refKeyCase</td> <td><code>String</code></td> <td>the casing for the reference document key. The default is to take                                      value of the property as is, unmodified, to generate the reference document                                      key. Use this to force reference document key casing. This will also allow                                      you to to query via index function in case insensitive way.                                      options: <code>'upper'</code> or <code>'lower'</code></td></tr></tbody></table> <p><strong>Example</strong> <em>(Simple reference document)</em></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> userSchema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  firstName<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
  lastName<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
  username<span class="token punctuation">:</span> String
<span class="token punctuation">}</span><span class="token punctuation">)</span>

userSchema<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> indexName<span class="token punctuation">:</span> <span class="token string">'UserName'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> userSchema<span class="token punctuation">)</span>
<span class="token comment">// use User.findByUserName(username) to query</span>
</code></pre></div><p><strong>Example</strong> <em>(Simple coumpund document)</em></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> userSchema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  email<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
  username<span class="token punctuation">:</span> String
<span class="token punctuation">}</span><span class="token punctuation">)</span>

userSchema<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'email'</span><span class="token punctuation">,</span> <span class="token string">'username'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> indexName<span class="token punctuation">:</span> <span class="token string">'EmailAndUserName'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> userSchema<span class="token punctuation">)</span>
<span class="token comment">// use User.findByEmailAndUserName(email, username) to query</span>
</code></pre></div><p><a name="Schema+method"></a></p> <h3 id="schema-method-name-func"><a href="#schema-method-name-func" aria-hidden="true" class="header-anchor">#</a> schema.method(name, func)</h3> <p>Creates a instance method for the created model.
An object of function names and functions can also be passed in.</p> <p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a><br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td><code>String</code></td> <td>the name of the method</td></tr> <tr><td>func</td> <td><code>function</code></td> <td>the actual function implementation</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> userSchema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  firstName<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
  lastName<span class="token punctuation">:</span> String
<span class="token punctuation">}</span><span class="token punctuation">)</span>

userSchema<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string">'getFullName'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> userSchema<span class="token punctuation">)</span>
<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  firstName<span class="token punctuation">:</span> <span class="token string">'Joe'</span><span class="token punctuation">,</span>
  lastName<span class="token punctuation">:</span> <span class="token string">'Smith'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Joe Smith</span>
</code></pre></div><p><a name="Schema+static"></a></p> <h3 id="schema-static-name-val"><a href="#schema-static-name-val" aria-hidden="true" class="header-anchor">#</a> schema.static(name, val)</h3> <p>Creates a static function or property for the created model.
An object of function or property names and functions or values can also be passed in.</p> <p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a><br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td><code>String</code></td> <td>name of the static property</td></tr> <tr><td>val</td> <td><code>*</code></td> <td>the actual value or static function</td></tr></tbody></table> <p><strong>Example</strong> <em>(Create a static function)</em></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> userSchema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
userSchema<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'bar'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> userSchema<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 'bar'</span>
</code></pre></div><p><strong>Example</strong> <em>(Create a static property)</em></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> userSchema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
userSchema<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'FOO'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> userSchema<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token constant">FOO</span><span class="token punctuation">)</span> <span class="token comment">// 'bar'</span>
</code></pre></div><p><a name="Schema+virtual"></a></p> <h3 id="schema-virtual-name-type-options"><a href="#schema-virtual-name-type-options" aria-hidden="true" class="header-anchor">#</a> schema.virtual(name, type, options)</h3> <p>Creates a virtual property for the created model with the given object
specifying the get and optionally set function</p> <p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a><br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td><code>String</code></td> <td>name of the virtual property</td></tr> <tr><td>type</td> <td><code>String</code> | <code>function</code> | <code>Object</code></td> <td>optional type to be used for the virtual property. If not provided default is                                      <code>'any'</code> type.</td></tr> <tr><td>options</td> <td><code>Object</code></td> <td>virtual options</td></tr> <tr><td>options.get</td> <td><code>function</code></td> <td>the virtual getter function</td></tr> <tr><td>options.set</td> <td><code>function</code></td> <td>the virtual setter function. If not provided the virtual becomes read-only.</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> userSchema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>firstName<span class="token punctuation">:</span> String<span class="token punctuation">,</span> lastName<span class="token punctuation">:</span> String<span class="token punctuation">}</span><span class="token punctuation">)</span>

userSchema<span class="token punctuation">.</span><span class="token function">virtual</span><span class="token punctuation">(</span><span class="token string">'fullName'</span><span class="token punctuation">,</span> String<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">set</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> parts <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>lastName <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> User <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> userSchema<span class="token punctuation">)</span>

<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span>firstName<span class="token punctuation">:</span> <span class="token string">'Joe'</span><span class="token punctuation">,</span> lastName<span class="token punctuation">:</span> <span class="token string">'Smith'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>fullName<span class="token punctuation">)</span> <span class="token comment">// Joe Smith</span>
user<span class="token punctuation">.</span>fullName <span class="token operator">=</span> <span class="token string">'Bill Jones'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>firstName<span class="token punctuation">)</span> <span class="token comment">// Bill</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>lastName<span class="token punctuation">)</span> <span class="token comment">// Jones</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>fullName<span class="token punctuation">)</span> <span class="token comment">// Bill Jones</span>
</code></pre></div><p><a name="Schema+set"></a></p> <h3 id="schema-set-key-value"><a href="#schema-set-key-value" aria-hidden="true" class="header-anchor">#</a> schema.set(key, [value])</h3> <p>Sets/gets a schema option.</p> <p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a><br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>key</td> <td><code>String</code></td> <td>option name</td></tr> <tr><td>[value]</td> <td><code>Object</code></td> <td>if not passed, the current option value is returned</td></tr></tbody></table> <p><a name="Schema+get"></a></p> <h3 id="schema-get-key-⇒"><a href="#schema-get-key-⇒" aria-hidden="true" class="header-anchor">#</a> schema.get(key) ⇒ <code>*</code></h3> <p>Gets a schema option.</p> <p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a><br> <strong>Returns</strong>: <code>*</code> - the option value<br> <strong>Access</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>key</td> <td><code>String</code></td> <td>option name</td></tr></tbody></table> <p><a name="Schema+pre"></a></p> <h3 id="schema-pre"><a href="#schema-pre" aria-hidden="true" class="header-anchor">#</a> schema.pre()</h3> <p>Defines a pre hook for the schema.
See <a href="https://www.github.com/bojand/grappling-hook" target="_blank" rel="noopener noreferrer">grappling-hook<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a><br> <a name="Schema+post"></a></p> <h3 id="schema-post"><a href="#schema-post" aria-hidden="true" class="header-anchor">#</a> schema.post()</h3> <p>Defines a post hook for the schema.
See <a href="https://www.github.com/bojand/grappling-hook" target="_blank" rel="noopener noreferrer">grappling-hook<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a><br> <a name="Schema+add"></a></p> <h3 id="schema-add-key-descriptor"><a href="#schema-add-key-descriptor" aria-hidden="true" class="header-anchor">#</a> schema.add(key, descriptor)</h3> <p>Adds the descriptor to the schema at the given key. Or add an <code>object</code> as a descriptor.</p> <p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>key</td> <td><code>String</code> | <code>Object</code></td> <td>the property key</td></tr> <tr><td>descriptor</td> <td><code>Object</code></td> <td>the property descriptor</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> userSchema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>firstName<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
userSchema<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'lastName'</span><span class="token punctuation">,</span> String<span class="token punctuation">)</span>
userSchema<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="Schema+extend"></a></p> <h3 id="schema-extend-other"><a href="#schema-extend-other" aria-hidden="true" class="header-anchor">#</a> schema.extend(other)</h3> <p>Extends other schema. Copies descriptor properties, methods, statics, virtuals and middleware.
If this schema has a named property already, the property is not copied.</p> <p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>other</td> <td><a href="#Schema"><code>Schema</code></a></td> <td>the schema to extend.</td></tr></tbody></table> <p><a name="Schema+getDocumentKeyValue"></a></p> <h3 id="schema-getdocumentkeyvalue-id-full-⇒-string"><a href="#schema-getdocumentkeyvalue-id-full-⇒-string" aria-hidden="true" class="header-anchor">#</a> schema.getDocumentKeyValue(id, full) ⇒ <code>String</code></h3> <p>Helper function to get the document key</p> <p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>id</td> <td><code>String</code></td> <td>the id</td></tr> <tr><td>full</td> <td><code>Boolean</code></td> <td>If <code>true</code> the full expanded value of the key will be returned if there were any suffix and / or prefix defined in schema they are also applied. We test if the passed in id already satisfies expansion.</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> schema <span class="token operator">=</span> lounge<span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>keyPrefix<span class="token punctuation">:</span> <span class="token string">'user::'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>schema<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token string">'114477a8-1901-4146-8c90-0fc9eec57a58'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// user::114477a8-1901-4146-8c90-0fc9eec57a58</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>schema<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token string">'user::114477a8-1901-4146-8c90-0fc9eec57a58'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// user::114477a8-1901-4146-8c90-0fc9eec57a58</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>schema<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token string">'user::114477a8-1901-4146-8c90-0fc9eec57a58'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 114477a8-1901-4146-8c90-0fc9eec57a58</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>schema<span class="token punctuation">.</span><span class="token function">getDocumentKeyValue</span><span class="token punctuation">(</span><span class="token string">'114477a8-1901-4146-8c90-0fc9eec57a58'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 114477a8-1901-4146-8c90-0fc9eec57a58</span>
</code></pre></div><p><a name="Schema+getRefKey"></a></p> <h3 id="schema-getrefkey-name-v-⇒-string"><a href="#schema-getrefkey-name-v-⇒-string" aria-hidden="true" class="header-anchor">#</a> schema.getRefKey(name, v) ⇒ <code>string</code></h3> <p>Gets the reference document key value</p> <p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td><code>String</code></td> <td>index name</td></tr> <tr><td>v</td> <td><code>String</code></td> <td>index value</td></tr></tbody></table> <p><a name="Schema+hasRefPath"></a></p> <h3 id="schema-hasrefpath-path-⇒-boolean"><a href="#schema-hasrefpath-path-⇒-boolean" aria-hidden="true" class="header-anchor">#</a> schema.hasRefPath(path) ⇒ <code>boolean</code></h3> <p>Returns whether this schema has the specified reference path</p> <p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>path</td> <td><code>String</code></td> <td>path to check</td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/lounge/api/" class="router-link-exact-active router-link-active">
          AbstractBaseModel
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/lounge/assets/js/app.4f62df11.js" defer></script><script src="/lounge/assets/js/2.1ee5204e.js" defer></script><script src="/lounge/assets/js/6.4f70d6da.js" defer></script>
  </body>
</html>
